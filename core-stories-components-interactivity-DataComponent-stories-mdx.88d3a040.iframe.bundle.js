"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[6167],{"./packages/core/stories/components/interactivity/DataComponent.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Template:()=>Template,clickEvents:()=>clickEvents,customImplementation:()=>customImplementation,customOnClick:()=>customOnClick,default:()=>DataComponent_stories,styleModifiers:()=>styleModifiers});var react=__webpack_require__("./node_modules/react/index.js"),lib=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-docs/dist/index.mjs"),src=__webpack_require__("./packages/core/src/index.tsx");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var CustomDataComponent=function CustomDataComponent(_ref){var _chartData$activeId,_ref2,_data$id,_props$style$fill,_props$style,component=_ref.component,data=_ref.data,props=_ref.props,handlers=_ref.handlers,_useChartData=(0,src.q1)(),chartData=_useChartData.data,setChartData=_useChartData.setData,activeId=null!=(_chartData$activeId=chartData.activeId)?_chartData$activeId:null,clickedIds=null!=(_ref2=chartData.clickedIds)?_ref2:new Set,id=null!=(_data$id=null==data?void 0:data.id)?_data$id:"",clicked=data&&clickedIds.has(id),active=data&&activeId===id;active||clicked?props.style=_extends({},props.style,{stroke:"#222222",strokeWidth:clicked&&!active?2:3}):props.style=_extends({},props.style,{stroke:null!=(_props$style$fill=null==props||null==(_props$style=props.style)?void 0:_props$style.fill)?_props$style$fill:void 0,strokeWidth:2});var handleMouseEnter=(0,react.useCallback)((function(event){setChartData(_extends({},chartData,{activeId:null==data?void 0:data.id})),null==handlers||null==handlers.onMouseEnter||handlers.onMouseEnter(data,event)}),[data,handlers,chartData]),handleMouseMove=(0,react.useCallback)((function(event){return null==handlers||null==handlers.onMouseMove?void 0:handlers.onMouseMove(data,event)}),[data,handlers]),handleMouseLeave=(0,react.useCallback)((function(event){setChartData(_extends({},chartData,{activeId:null})),null==handlers||null==handlers.onMouseLeave||handlers.onMouseLeave(data,event)}),[data,handlers,chartData]),handleClick=(0,react.useCallback)((function(event){clickedIds.has(id)?clickedIds.delete(id):clickedIds.add(id),setChartData(_extends({},chartData,{clickedIds})),null==handlers||null==handlers.onClick||handlers.onClick(data,event)}),[data,handlers,chartData]);return(0,react.createElement)(component,_extends({key:"custom-data-component-"+active},props,{onMouseEnter:handleMouseEnter,onMouseMove:handleMouseMove,onMouseLeave:handleMouseLeave,onClick:handleClick}))};try{CustomDataComponent.displayName="CustomDataComponent",CustomDataComponent.__docgenInfo={description:"",displayName:"CustomDataComponent",props:{data:{defaultValue:null,description:"data object",name:"data",required:!1,type:{name:"WithId"}},component:{defaultValue:null,description:"function to create a chart component",name:"component",required:!0,type:{name:"FC<ComponentProps>"}},props:{defaultValue:null,description:"props passed to the component",name:"props",required:!0,type:{name:"SvgElementVariantProps & InteractivityProps"}},handlers:{defaultValue:null,description:"handlers for events",name:"handlers",required:!1,type:{name:"DataInteractivityHandlers<DataSpec>"}},modifiers:{defaultValue:null,description:"style modifiers",name:"modifiers",required:!1,type:{name:"DataInteractivityModifiers"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/core/stories/components/interactivity/CustomDataComponent.tsx#CustomDataComponent"]={docgenInfo:CustomDataComponent.__docgenInfo,name:"CustomDataComponent",path:"packages/core/stories/components/interactivity/CustomDataComponent.tsx#CustomDataComponent"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),CustomChart=function CustomChart(){var keyframes=["@keyframes colorchange {","from {fill: #999999 }","to {fill: #dd4444 }","}"].join("");return(0,jsx_runtime.jsxs)(src.kL,{size:[400,300],padding:[40,40,40,40],style:{margin:"0.5em",border:"solid 1px #aa3333",display:"inline-block"},children:[(0,jsx_runtime.jsx)("style",{children:keyframes}),(0,jsx_runtime.jsx)(src.Tg,{variant:"inner"}),(0,jsx_runtime.jsx)(src.Aj,{component:src.Cd,data:{id:"A",value:"first circle"},props:{cx:50,cy:50,r:30,style:{fill:"#cccccc"}},modifiers:{onMouseEnter:{fill:"#dd7777"},onMouseLeave:{}}}),(0,jsx_runtime.jsx)(src.ZT,{position:[90,50],style:{textAnchor:"start"},children:"hover to change color"}),(0,jsx_runtime.jsx)(src.Aj,{component:src.Cd,data:{id:"B",value:"second circle"},props:{cx:50,cy:120,r:30,style:{fill:"#999999"}},modifiers:{onClick:{animation:"colorchange 0.5s ease-in 0s 4 alternate none running"}}}),(0,jsx_runtime.jsx)(src.ZT,{position:[90,120],style:{textAnchor:"start"},children:"click for 2x color pulse"})]})};CustomChart.displayName="CustomChart";const Template=args=>(0,jsx_runtime.jsx)(src.Aj,{...args}),customOnClick=(data,event)=>{console.log("clicked: "+JSON.stringify(data))};const clickEvents=()=>(0,jsx_runtime.jsxs)(src.kL,{size:[400,300],padding:[40,40,40,40],style:{margin:"0.5em",border:"solid 1px #aa3333",display:"inline-block"},children:[(0,jsx_runtime.jsx)(src.Tg,{variant:"inner"}),(0,jsx_runtime.jsx)(src.Aj,{component:src.Cd,data:{id:"A",value:"first circle"},props:{cx:50,cy:50,r:30,style:{fill:"#cccccc"}},handlers:{onClick:customOnClick}}),(0,jsx_runtime.jsx)(src.Aj,{component:src.Cd,data:{id:"B",value:"second circle"},props:{cx:50,cy:120,r:30,style:{fill:"#999999"}},handlers:{onClick:customOnClick}}),(0,jsx_runtime.jsx)(src.ZT,{position:[120,50],style:{textAnchor:"start"},children:(0,jsx_runtime.jsx)("p",{children:"Click to log into console"})})]});clickEvents.storyName="click events",clickEvents.parameters={storySource:{source:'<Chart size={[400, 300]} padding={[40, 40, 40, 40]} style={{\n  margin: "0.5em",\n  border: "solid 1px #aa3333",\n  display: "inline-block"\n}}><Surface variant={"inner"} /><DataComponent component={Circle} data={{\n    id: "A",\n    value: "first circle"\n  }} props={{\n    cx: 50,\n    cy: 50,\n    r: 30,\n    style: {\n      fill: "#cccccc"\n    }\n  }} handlers={{\n    onClick: customOnClick\n  }} /><DataComponent component={Circle} data={{\n    id: "B",\n    value: "second circle"\n  }} props={{\n    cx: 50,\n    cy: 120,\n    r: 30,\n    style: {\n      fill: "#999999"\n    }\n  }} handlers={{\n    onClick: customOnClick\n  }} /><Typography position={[120, 50]} style={{\n    textAnchor: "start"\n  }}><p>{"Click to log into console"}</p></Typography></Chart>'}};const styleModifiers=()=>(0,jsx_runtime.jsx)(CustomChart,{});styleModifiers.storyName="style modifiers",styleModifiers.parameters={storySource:{source:"<CustomChart />"}};const customImplementation=()=>(0,jsx_runtime.jsxs)(src.kL,{size:[400,300],padding:[40,40,40,40],style:{margin:"0.5em",border:"solid 1px #aa3333",display:"inline-block"},children:[(0,jsx_runtime.jsx)(src.Tg,{variant:"inner"}),(0,jsx_runtime.jsx)(CustomDataComponent,{component:src.Cd,data:{id:"A",value:"first circle"},props:{cx:50,cy:50,r:30,style:{fill:"#ddaaaa",fillOpacity:.5,stroke:"#ddaaaa"}}}),(0,jsx_runtime.jsx)(CustomDataComponent,{component:src.Cd,data:{id:"B",value:"second circle"},props:{cx:50,cy:120,r:30,style:{fill:"#aaaadd",fillOpacity:.5,stroke:"#aaaadd"}}}),(0,jsx_runtime.jsx)(src.ZT,{position:[120,50],style:{textAnchor:"start"},children:(0,jsx_runtime.jsx)("p",{children:"Hover and click"})})]});customImplementation.storyName="custom implementation",customImplementation.parameters={storySource:{source:'<Chart size={[400, 300]} padding={[40, 40, 40, 40]} style={{\n  margin: "0.5em",\n  border: "solid 1px #aa3333",\n  display: "inline-block"\n}}><Surface variant={"inner"} /><CustomDataComponent component={Circle} data={{\n    id: "A",\n    value: "first circle"\n  }} props={{\n    cx: 50,\n    cy: 50,\n    r: 30,\n    style: {\n      fill: "#ddaaaa",\n      fillOpacity: 0.5,\n      stroke: "#ddaaaa"\n    }\n  }} /><CustomDataComponent component={Circle} data={{\n    id: "B",\n    value: "second circle"\n  }} props={{\n    cx: 50,\n    cy: 120,\n    r: 30,\n    style: {\n      fill: "#aaaadd",\n      fillOpacity: 0.5,\n      stroke: "#aaaadd"\n    }\n  }} /><Typography position={[120, 50]} style={{\n    textAnchor: "start"\n  }}><p>{"Hover and click"}</p></Typography></Chart>'}};const componentMeta={title:"Core/Components/Interactivity/DataComponent",tags:["stories-mdx"],includeStories:["clickEvents","styleModifiers","customImplementation"]};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,lib.ah)(),props.components);return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,{...props,children:(0,jsx_runtime.jsx)(_createMdxContent,{})}):_createMdxContent();function _createMdxContent(){const _components=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2",a:"a"},(0,lib.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(_components.h1,{id:"datacomponent",children:"DataComponent"}),"\n",(0,jsx_runtime.jsx)(dist.h_,{title:"Core/Components/Interactivity/DataComponent"}),"\n","\n",(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)(_components.code,{children:"DataComponent"})," is a wrapper function that associates event handlers with other components."]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)(_components.code,{children:"DataComponent"})," binds event handlers to chart components so that the actions triggered by those events depend on object-specific data.\nIt is used extensively by add-on packages to provide interactivity for chart components."]}),"\n",(0,jsx_runtime.jsx)(dist.$4,{of:src.Aj}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"function-signatures",children:"Function signatures"}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"Event handlers should be prepared as functions that accept two arguments: a data object and a mouse event object."}),"\n",(0,jsx_runtime.jsx)(dist.Hw,{language:"javascript",code:"\nconst customOnClick = (data, event) => {\n   ...\n}\n"}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["(In typescript, the type of the ",(0,jsx_runtime.jsx)(_components.code,{children:"data"})," argument should match the type of the prop ",(0,jsx_runtime.jsx)(_components.code,{children:"data"})," in ",(0,jsx_runtime.jsx)(_components.code,{children:"DataComponent"}),".\nThe ",(0,jsx_runtime.jsx)(_components.code,{children:"event"})," argument should be ot type ",(0,jsx_runtime.jsx)(_components.code,{children:"React.MouseEvent"}),".)"]}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"event-handlers",children:"Event handlers"}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:[(0,jsx_runtime.jsx)(_components.code,{children:"DataComponent"})," can be used to handle events on multiple components with a single handler function. In the example below,\na single ",(0,jsx_runtime.jsx)(_components.code,{children:"customOnClick"})," function is associated with two different components (circles)."]}),"\n","\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"click events",children:(0,jsx_runtime.jsxs)(src.kL,{size:[400,300],padding:[40,40,40,40],style:{margin:"0.5em",border:"solid 1px #aa3333",display:"inline-block"},children:[(0,jsx_runtime.jsx)(src.Tg,{variant:"inner"}),(0,jsx_runtime.jsx)(src.Aj,{component:src.Cd,data:{id:"A",value:"first circle"},props:{cx:50,cy:50,r:30,style:{fill:"#cccccc"}},handlers:{onClick:customOnClick}}),(0,jsx_runtime.jsx)(src.Aj,{component:src.Cd,data:{id:"B",value:"second circle"},props:{cx:50,cy:120,r:30,style:{fill:"#999999"}},handlers:{onClick:customOnClick}}),(0,jsx_runtime.jsx)(src.ZT,{position:[120,50],style:{textAnchor:"start"},children:(0,jsx_runtime.jsx)(_components.p,{children:"Click to log into console"})})]})})}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["(Click on a circle, then check the browser console with ",(0,jsx_runtime.jsx)(_components.code,{children:"Ctrl Shift J"})," for output.)"]}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"style-modifiers",children:"Style modifiers"}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"style modifiers",children:(0,jsx_runtime.jsx)(CustomChart,{})})}),"\n",(0,jsx_runtime.jsx)(_components.h2,{id:"custom-implementations",children:"Custom implementations"}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["One use for ",(0,jsx_runtime.jsx)(_components.code,{children:"DataComponent"})," is to implement custom changes to element colors and styles."]}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["In add-on packages, e.g. ",(0,jsx_runtime.jsx)(_components.code,{children:"@chsk/xy"})," and ",(0,jsx_runtime.jsx)(_components.code,{children:"@chsk/band"}),", some chart components are assigned\nfill and stroke colors automatically. These colors override settings in the chart theme.\nIn particular, it is not possible to use ",(0,jsx_runtime.jsx)(_components.code,{children:":hover"})," styles in the chart theme to toggle these\ncolors upon mouse events. Instead, such tuning can be made in custom implementations\nof ",(0,jsx_runtime.jsx)(_components.code,{children:"DataComponent"}),"."]}),"\n",(0,jsx_runtime.jsx)(_components.p,{children:"The example below changes the circle stroke color in response to mouse events.\nHover the mouse pointer and click on the circles, and observe changes to the outlines."}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"custom implementation",children:(0,jsx_runtime.jsxs)(src.kL,{size:[400,300],padding:[40,40,40,40],style:{margin:"0.5em",border:"solid 1px #aa3333",display:"inline-block"},children:[(0,jsx_runtime.jsx)(src.Tg,{variant:"inner"}),(0,jsx_runtime.jsx)(CustomDataComponent,{component:src.Cd,data:{id:"A",value:"first circle"},props:{cx:50,cy:50,r:30,style:{fill:"#ddaaaa",fillOpacity:.5,stroke:"#ddaaaa"}}}),(0,jsx_runtime.jsx)(CustomDataComponent,{component:src.Cd,data:{id:"B",value:"second circle"},props:{cx:50,cy:120,r:30,style:{fill:"#aaaadd",fillOpacity:.5,stroke:"#aaaadd"}}}),(0,jsx_runtime.jsx)(src.ZT,{position:[120,50],style:{textAnchor:"start"},children:(0,jsx_runtime.jsx)(_components.p,{children:"Hover and click"})})]})})}),"\n",(0,jsx_runtime.jsxs)(_components.p,{children:["The above example uses a custom function ",(0,jsx_runtime.jsx)(_components.code,{children:"CustomDataComponent"})," that is a stand-in for ",(0,jsx_runtime.jsx)(_components.code,{children:"DataComponent"}),".\nThe full code is available ",(0,jsx_runtime.jsx)(_components.a,{href:"https://github.com/tkonopka/chsk/blob/main/packages/core/stories/components/interactivity/CustomDataComponent.tsx",target:"_blank",rel:"nofollow noopener noreferrer",children:"here"}),"."]})]})}}};const DataComponent_stories=componentMeta}}]);