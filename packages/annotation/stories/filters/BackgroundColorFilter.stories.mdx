import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs'
import { Chart, Surface, Rectangle, Typography } from '@chsk/core'
import { BackgroundColorFilter } from '../../src/filters'

<Meta title="Addons/Annotation/Filters/BackgroundColorFilter" />

# BackgroundColorFilter

export const Template = args => <BackgroundColorFilter {...args} />

`BackgroundColorFilter` creates an svg filter that applies a solid background color.

<ArgsTable of={BackgroundColorFilter} />

## Color and opacity

Prop `floodColor` determines the background color.
Prop `floodOpacity` determines the opacity of the filter.

<Canvas>
    <Story name="color">
        <Chart size={[280, 120]} padding={[20, 20, 20, 20]} style={{ display: 'inline-block' }}>
            <Surface />
            <BackgroundColorFilter id={'bgColor'} floodColor={'#ffffff'} />
            <Rectangle x={0} y={0} width={120} height={80} style={{ fill: '#d0d0dd' }} />
            <Typography
                position={[120, 40]}
                style={{
                    fill: '#aa2222',
                    filter: 'url(#bgColor)',
                    fontSize: '16px',
                    textAnchor: 'middle',
                }}
                children={
                    <>
                        This is <tspan style={{ fontWeight: 600 }}>important</tspan> text.
                    </>
                }
            />
        </Chart>
    </Story>
    <Story name="opacity">
        <Chart size={[280, 120]} padding={[20, 20, 20, 20]} style={{ display: 'inline-block' }}>
            <Surface />
            <BackgroundColorFilter id={'bgOpacity'} floodColor={'#ffffff'} floodOpacity={0.6} />
            <Rectangle x={0} y={0} width={120} height={80} style={{ fill: '#d0d0dd' }} />
            <Typography
                position={[120, 40]}
                style={{
                    fill: '#aa2222',
                    filter: 'url(#bgOpacity)',
                    fontSize: '16px',
                    textAnchor: 'middle',
                }}
                children={
                    <>
                        This is <tspan style={{ fontWeight: 600 }}>important</tspan> text.
                    </>
                }
            />
        </Chart>
    </Story>
</Canvas>

## Expansion

Prop `expansion` takes a four-element array that expands the background color around the
element. The array entries determine expansion along the top, right, bottom, and left sides.
Values are interpreted as fractions of the object's dimensions.

<Canvas>
    <Story name="expansion">
        <Chart size={[280, 120]} padding={[20, 20, 20, 20]} style={{ display: 'inline-block' }}>
            <Surface />
            <BackgroundColorFilter
                key={'bgExpansionFilter'}
                id={'bgExpansion'}
                floodColor={'#ffffff'}
                floodOpacity={0.7}
                expansion={[0.3, 0.0, 0.3, 0.0]}
            />
            <Rectangle x={0} y={0} width={120} height={80} style={{ fill: '#d0d0dd' }} />
            <Typography
                position={[120, 40]}
                style={{
                    fill: '#aa2222',
                    filter: 'url(#bgExpansion)',
                    fontSize: '16px',
                    textAnchor: 'middle',
                }}
                children={
                    <>
                        This is <tspan style={{ fontWeight: 600 }}>important</tspan> text.
                    </>
                }
            />
        </Chart>
    </Story>
</Canvas>

Unfortunately, it is not possible to use svg filters to expand a fixed number of pixels around the text.
