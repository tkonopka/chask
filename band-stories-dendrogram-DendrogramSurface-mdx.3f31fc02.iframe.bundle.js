"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[6529,428],{"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NF:()=>withMDXComponents,Zo:()=>MDXProvider,ah:()=>useMDXComponents,pC:()=>MDXContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({});function withMDXComponents(Component){return function boundMDXComponent(props){const allComponents=useMDXComponents(props.components);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{...props,allComponents})}}function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>"function"==typeof components?components(contextComponents):{...contextComponents,...components}),[contextComponents,components])}const emptyObject={};function MDXProvider({components,children,disableParentContext}){let allComponents;return allComponents=disableParentContext?"function"==typeof components?components({}):components||emptyObject:useMDXComponents(components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},children)}},"./packages/band/stories/dendrogram/DendrogramSurface.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllLevels:()=>AllLevels,Expansion:()=>Expansion,Interactivity:()=>Interactivity,SelectedLevels:()=>SelectedLevels,Subset:()=>Subset,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DendrogramSurface_stories});var chsk_core_es=__webpack_require__("./packages/core/dist/chsk-core.es.js"),context=__webpack_require__("./packages/band/src/dendrogram/context.tsx"),react=__webpack_require__("./node_modules/react/index.js"),predicates=__webpack_require__("./packages/band/src/dendrogram/predicates.ts"),utils=__webpack_require__("./packages/band/src/dendrogram/utils.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var DendrogramSurface=function DendrogramSurface(_ref){var levels=_ref.levels,ids=_ref.ids,keys=_ref.keys,_ref$expansion=_ref.expansion,expansion=void 0===_ref$expansion?[0,0,0,0]:_ref$expansion,_ref$expansionUnit=_ref.expansionUnit,expansionUnit=void 0===_ref$expansionUnit?"band":_ref$expansionUnit,_ref$component=_ref.component,component=void 0===_ref$component?chsk_core_es.AeJ:_ref$component,componentProps=_ref.componentProps,_ref$dataComponent=_ref.dataComponent,dataComponent=void 0===_ref$dataComponent?chsk_core_es.Aj5:_ref$dataComponent,_ref$interactive=_ref.interactive,interactive=void 0!==_ref$interactive&&_ref$interactive,handlers=_ref.handlers,modifiers=_ref.modifiers,className=_ref.className,style=_ref.style,_ref$setRole=_ref.setRole,setRole=void 0===_ref$setRole||_ref$setRole,originalData=(0,chsk_core_es.W3B)().data,preparedData=(0,context._$)(),scales=(0,chsk_core_es.kE1)().scales,horizontal=(0,chsk_core_es.y7R)(scales.y),_useState=(0,react.useState)(void 0),active=_useState[0],setActive=_useState[1],indexScale=horizontal?scales.y:scales.x,_useIdsKeys=(0,chsk_core_es.lRm)(ids,keys,preparedData),idSet=_useIdsKeys.idSet,keyArray=_useIdsKeys.keyArray;if(!(0,predicates.T)(originalData))return null;var expansionMultiplier="band"===expansionUnit?indexScale.bandwidth():indexScale.step(),absExpansion=expansion.map((function(v){return v*expansionMultiplier})),onMouseEnter=(0,react.useCallback)((function(data,event){null==handlers||null==handlers.onMouseEnter||handlers.onMouseEnter(data,event),setActive(data)}),[handlers,setActive]),onMouseLeave=(0,react.useCallback)((function(data,event){null==handlers||null==handlers.onMouseLeave||handlers.onMouseLeave(data,event),setActive(void 0)}),[handlers,setActive]),compositeHandlers=interactive?_extends({},handlers,{onMouseEnter,onMouseLeave}):handlers,commonProps=_extends({variant:"dendrogram-surface",setRole},componentProps,{className,style}),result=preparedData.data.map((function(seriesData){var id=seriesData.id,data=originalData[seriesData.index];return idSet.has(id)&&data?(0,utils.y)(seriesData,indexScale,levels,void 0===keys?keys:keyArray).map((function(level){var rectProps=function createSurfaceProps(data,index,horizontal,expansion){var positions=data.positionInterval[index],heights=data.heightInterval[index];if(!positions||!heights)return null;var deltaHeight=heights[1]-heights[0],deltaPosition=positions[1]-positions[0];return{x:(horizontal?heights[0]:positions[0])-expansion[chsk_core_es.RLj],y:(horizontal?positions[0]:heights[0])-expansion[chsk_core_es.GSB],width:(horizontal?deltaHeight:deltaPosition)+expansion[chsk_core_es.RLj]+expansion[chsk_core_es.pXp],height:(horizontal?deltaPosition:deltaHeight)+expansion[chsk_core_es.GSB]+expansion[chsk_core_es.DaS]}}(seriesData,level,horizontal,absExpansion);if(!rectProps)return null;var interactiveOpacity=!!interactive&&(seriesData.id===(null==active?void 0:active.id)&&level===(null==active?void 0:active.level)),fixedOpacity=!interactive;return(0,react.createElement)(dataComponent,{key:"s-"+id+"-"+level,component,data:{id,level,data},props:_extends({},commonProps,rectProps,{opacity:+(interactiveOpacity||fixedOpacity)}),handlers:compositeHandlers,modifiers})})):null}));return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:result.filter(Boolean)})};try{DendrogramSurface.displayName="DendrogramSurface",DendrogramSurface.__docgenInfo={description:"",displayName:"DendrogramSurface",props:{levels:{defaultValue:null,description:"hierarchy levels",name:"levels",required:!1,type:{name:"number[]"}},expansion:{defaultValue:{value:"[0, 0, 0, 0]"},description:"expansion",name:"expansion",required:!1,type:{name:"FourSideSizeSpec"}},expansionUnit:{defaultValue:{value:"band"},description:"expansion unit",name:"expansionUnit",required:!1,type:{name:"enum",value:[{value:'"band"'},{value:'"step"'}]}},ids:{defaultValue:null,description:"ids to display (defaults to all ids)",name:"ids",required:!1,type:{name:"string[]"}},keys:{defaultValue:null,description:"keys to display (default to all keys)",name:"keys",required:!1,type:{name:"string[]"}},className:{defaultValue:null,description:"class string",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"css style",name:"style",required:!1,type:{name:"Partial<CSSProperties>"}},setRole:{defaultValue:{value:"true"},description:"toggle role attribute in svg code",name:"setRole",required:!1,type:{name:"boolean"}},interactive:{defaultValue:{value:"false"},description:"activate interactive features",name:"interactive",required:!1,type:{name:"boolean"}},handlers:{defaultValue:null,description:"handlers for events",name:"handlers",required:!1,type:{name:"DataInteractivityHandlers<DendrogramInteractiveDataItem>"}},modifiers:{defaultValue:null,description:"style modifiers",name:"modifiers",required:!1,type:{name:"DataInteractivityModifiers"}},dataComponent:{defaultValue:null,description:"function binding data to interactivity handlers",name:"dataComponent",required:!1,type:{name:"FC<DataComponentProps<DendrogramInteractiveDataItem, RectangleProps>>"}},component:{defaultValue:null,description:"function used to draw individual components",name:"component",required:!1,type:{name:"FC<RectangleProps>"}},componentProps:{defaultValue:null,description:"props passed to each component",name:"componentProps",required:!1,type:{name:"Partial<RectangleProps>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/src/dendrogram/DendrogramSurface.tsx#DendrogramSurface"]={docgenInfo:DendrogramSurface.__docgenInfo,name:"DendrogramSurface",path:"packages/band/src/dendrogram/DendrogramSurface.tsx#DendrogramSurface"})}catch(__react_docgen_typescript_loader_error){}var _AllLevels$parameters,_AllLevels$parameters2,_SelectedLevels$param,_SelectedLevels$param2,_Subset$parameters,_Subset$parameters2,_Expansion$parameters,_Expansion$parameters2,_Interactivity$parame,_Interactivity$parame2,decorators=__webpack_require__("./packages/band/stories/dendrogram/decorators.tsx");function DendrogramSurface_stories_extends(){return DendrogramSurface_stories_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DendrogramSurface_stories_extends.apply(this,arguments)}const DendrogramSurface_stories={title:"Addons/Band/Dendrogram/DendrogramSurface",component:DendrogramSurface};var AllLevels={name:"all levels",args:{style:{fill:"#888888",fillOpacity:.5,strokeWidth:1,stroke:"#888888"}},decorators:[decorators.LL]},SelectedLevels={name:"selected levels",args:{levels:[1,2],style:{fill:"#888888",fillOpacity:.5,strokeWidth:1,stroke:"#888888"}},decorators:[decorators.LL]},Subset={name:"subset",args:{keys:["gamma","epsilon"],style:{fill:"#888888",fillOpacity:.5,strokeWidth:1,stroke:"#888888"}},decorators:[decorators.LL]},Expansion={name:"expansion",args:{levels:[2],expansion:[.5,0,.5,.5],style:{fill:"#888888",fillOpacity:.5,strokeWidth:1,stroke:"#888888"}},decorators:[decorators.LL]},Interactivity={name:"interactive",args:{interactive:!0,expansion:[.5,0,.5,.5],style:{fill:"#cccccc",stroke:"#dd0000",strokeWidth:1,cursor:"pointer"},handlers:{onClick:function onClick(data){console.log(JSON.stringify(data))}}},decorators:[decorators.LL]};AllLevels.parameters=DendrogramSurface_stories_extends({},AllLevels.parameters,{docs:DendrogramSurface_stories_extends({},null==(_AllLevels$parameters=AllLevels.parameters)?void 0:_AllLevels$parameters.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'all levels',\n  args: {\n    style: {\n      fill: '#888888',\n      fillOpacity: 0.5,\n      strokeWidth: 1,\n      stroke: '#888888'\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_AllLevels$parameters2=AllLevels.parameters)||null==(_AllLevels$parameters2=_AllLevels$parameters2.docs)?void 0:_AllLevels$parameters2.source)})}),SelectedLevels.parameters=DendrogramSurface_stories_extends({},SelectedLevels.parameters,{docs:DendrogramSurface_stories_extends({},null==(_SelectedLevels$param=SelectedLevels.parameters)?void 0:_SelectedLevels$param.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'selected levels',\n  args: {\n    levels: [1, 2],\n    style: {\n      fill: '#888888',\n      fillOpacity: 0.5,\n      strokeWidth: 1,\n      stroke: '#888888'\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_SelectedLevels$param2=SelectedLevels.parameters)||null==(_SelectedLevels$param2=_SelectedLevels$param2.docs)?void 0:_SelectedLevels$param2.source)})}),Subset.parameters=DendrogramSurface_stories_extends({},Subset.parameters,{docs:DendrogramSurface_stories_extends({},null==(_Subset$parameters=Subset.parameters)?void 0:_Subset$parameters.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'subset',\n  args: {\n    keys: ['gamma', 'epsilon'],\n    style: {\n      fill: '#888888',\n      fillOpacity: 0.5,\n      strokeWidth: 1,\n      stroke: '#888888'\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_Subset$parameters2=Subset.parameters)||null==(_Subset$parameters2=_Subset$parameters2.docs)?void 0:_Subset$parameters2.source)})}),Expansion.parameters=DendrogramSurface_stories_extends({},Expansion.parameters,{docs:DendrogramSurface_stories_extends({},null==(_Expansion$parameters=Expansion.parameters)?void 0:_Expansion$parameters.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'expansion',\n  args: {\n    levels: [2],\n    expansion: [0.5, 0, 0.5, 0.5],\n    style: {\n      fill: '#888888',\n      fillOpacity: 0.5,\n      strokeWidth: 1,\n      stroke: '#888888'\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_Expansion$parameters2=Expansion.parameters)||null==(_Expansion$parameters2=_Expansion$parameters2.docs)?void 0:_Expansion$parameters2.source)})}),Interactivity.parameters=DendrogramSurface_stories_extends({},Interactivity.parameters,{docs:DendrogramSurface_stories_extends({},null==(_Interactivity$parame=Interactivity.parameters)?void 0:_Interactivity$parame.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'interactive',\n  args: {\n    interactive: true,\n    expansion: [0.5, 0, 0.5, 0.5],\n    style: {\n      fill: '#cccccc',\n      stroke: '#dd0000',\n      strokeWidth: 1,\n      cursor: 'pointer'\n    },\n    handlers: {\n      onClick: (data?: DendrogramInteractiveDataItem) => {\n        console.log(JSON.stringify(data));\n      }\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_Interactivity$parame2=Interactivity.parameters)||null==(_Interactivity$parame2=_Interactivity$parame2.docs)?void 0:_Interactivity$parame2.source)})});var __namedExportsOrder=["AllLevels","SelectedLevels","Subset","Expansion","Interactivity"]},"./packages/band/stories/dendrogram/DendrogramSurface.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_home_runner_work_chsk_chsk_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs"),_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/band/stories/dendrogram/DendrogramSurface.stories.tsx");function _createMdxContent(props){const _components=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2"},(0,_home_runner_work_chsk_chsk_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__.ah)(),props.components);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h1,{id:"dendrogramsurface",children:"DendrogramSurface"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.h_,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"DendrogramSurface"})," draws rectangles around dendrogram branches."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Ed,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"data-subsets",children:"Data subsets"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["By default ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"DendrogramSurface"})," draws a series of rectangles, each capturing a layer of the dendrogram hierarchy."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.AllLevels}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Prop ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"levels"})," accepts an array of integers that denote specific parts of the dendrogram.\nIntegers are interpreted as indexes in the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"merge"})," field in the original data."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.SelectedLevels}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Prop ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"ids"})," uses a list of leaf identifiers to creates a surface around the branch that encompasses those leaves."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.Subset}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["A distinction between ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"levels"})," and ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"ids"})," is that an array of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"ids"})," always creates only a single surface.\nIn contrast, an array of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"levels"})," draws multiple surfaces."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"expansion",children:"Expansion"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Prop ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"expansion"})," enlarges the surface around a branch."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.Expansion}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"interactivity",children:"Interactivity"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Prop ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"interactive"})," toggles interactivity, which makes surfaces become visible only upon mouse interactions."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.Interactivity}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Note that if ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"DendrogramTree"})," (or any other component) is layered on top of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"DendrogramSurface"}),",\nit may be desirable to turn off pointer events on the top layer.\nThis is achieved by including ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"pointerEvents: 'none'"})," in the top layer's style."]})]})}const __WEBPACK_DEFAULT_EXPORT__=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,_home_runner_work_chsk_chsk_node_modules_storybook_addon_docs_dist_shims_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__.ah)(),props.components);return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MDXLayout,Object.assign({},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_createMdxContent,props)})):_createMdxContent(props)}}}]);