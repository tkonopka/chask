"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[9771],{"./packages/matrix/dist/chsk-matrix.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Br:()=>HeatMap,D6:()=>UpSetBar,F0:()=>UpSet,WL:()=>HeatMapCells,Wf:()=>isHeatMapData,ad:()=>HeatMapHighlight,by:()=>isUpSetData,eT:()=>HeatMapRectangle,hI:()=>UpSetGrid,iC:()=>UpSetMemberships,jE:()=>HeatMapSurface,oT:()=>HeatMapCircle});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),framer_motion__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/framer-motion/dist/es/components/LazyMotion/index.mjs"),framer_motion__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/features-animation.mjs"),framer_motion__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion-minimal.mjs"),_chsk_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_chsk_band__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/band/dist/chsk-band.es.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var Z=["container","keys","data","dataSize","scaleX","scaleY","scaleColor","scaleSize","children"],$={variant:"band",padding:0},HeatMap=function HeatMap(t){var n=t.container,i=void 0===n?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.WdC:n,r=t.keys,o=t.data,s=t.dataSize,_=t.scaleX,w=void 0===_?$:_,N=t.scaleY,j=void 0===N?$:N,C=t.scaleColor,M=t.scaleSize,P=void 0===M?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ooi:M,R=t.children,L=_objectWithoutPropertiesLoose(t,Z),A=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FgM)(),W=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.uK4)(i),B=W.dimsProps,V=W.origin,D=W.innerSize,I=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(o)}),[o]),O=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return o.map((function(e){return e.id}))}),[o]),E=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n){var i=e.map((function(e){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIU)(e)})),r=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(n);return t.map((function(e,t){var o=e.id,a=r[o],l=void 0!==a&&void 0!==n?n[a]:{id:o};return{id:o,index:t,value:i.map((function(t){return t(e)})),size:i.map((function(e){return Number(e(l))}))}}))}(r,o,s)}),[r,o,s]),F=function(e,t,n,i,r){var o={x:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(n),y:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(i)};return o.x.domain=t,o.x.size=r[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],o.y.domain=e,o.y.size=r[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],o}(O,r,w,j,D),X=F.x,Y=F.y,U=function(e,t){if("categorical"===t.variant){var n=new Set(e.map((function(e){return e.value})).flat().map(String));return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(t,Array.from(n))}var i=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(e.map((function(e){return e.value})).flat().map(Number).filter(isFinite));return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(t,i)}(E,null!=C?C:A.Color.sequential),q=function(e,t,n,i,r){var o=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Fp7)(e.map((function(e){return e.size})).flat()),a=Math.min(n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]/i.length,n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X]/r.length)/2;return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__._C2)(t,o,a)}(E,P,D,O,r),G=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.cT_)({x:X,y:Y,color:U,size:q});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.PzT,_extends({variant:"heatmap",position:V,size:B.size,padding:B.padding,originalData:o,processedData:E,seriesIndexes:I,keys:r,scalesContextValue:G},L,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_3__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_4__.H,children:R})}))},te=["x","y","width","height","style"],HeatMapCircle=function HeatMapCircle(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=e.style,a=_objectWithoutPropertiesLoose(e,te),l={fill:null==o?void 0:o.fill,r:Math.min(i,r)/2};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.circle,_extends({},a,{initial:l,animate:l,cx:t,cy:n,style:_extends({},o,{fill:void 0})}))},ne=["x","y","width","height"],HeatMapSimpleRectangle=function HeatMapSimpleRectangle(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=_objectWithoutPropertiesLoose(e,ne);return delete o.cellSize,delete o.cellValue,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",_extends({x:t-i/2,y:n-r/2,height:r,width:i},o))},ie=["x","y","width","height","style"],HeatMapRectangle=function HeatMapRectangle(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=e.style,a=_objectWithoutPropertiesLoose(e,ie),l={fill:null==o?void 0:o.fill};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({},a,{initial:l,animate:l,x:t-i/2,y:n-r/2,height:r,width:i,style:_extends({},o,{fill:void 0})}))},isHeatMapData=function isHeatMapData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e})).every(Boolean)},isHeatMapSetting=function isHeatMapSetting(e,t){return function isHeatMapProcessedData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"index"in e&&"value"in e&&"size"in e})).every(Boolean)}(e)&&(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.y7R)(t.x)&&(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.y7R)(t.y)},re=["ids","keys","cells","component","componentProps","scaleColor","scaleSize","dataComponent","className","style","setRole","children"],HeatMapCells=function HeatMapCells(n){var i=n.ids,r=n.keys,o=n.cells,a=n.component,l=void 0===a?HeatMapSimpleRectangle:a,s=n.componentProps,c=n.scaleColor,d=n.scaleSize,h=n.dataComponent,f=void 0===h?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Wnl:h,m=n.className,v=n.style,p=n.setRole,y=void 0===p||p,x=n.children,g=_objectWithoutPropertiesLoose(n,re),b=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),z=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)(),k=z.scales,S=b.data,_=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(i,r,b),W=_.idSet,B=_.keySet;if(!isHeatMapSetting(S,k))return null;var V=c?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.rio)(c):k.color,D=d?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Pur)(d):k.size,I=D(D.domain()[1]),O=isFinite(I),E=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n){var i={};return e?e.forEach((function(e){var t=e[0],n=e[1];i[t]||(i[t]=new Set),i[t].add(n)})):Array.from(t).forEach((function(e){i[e]=n})),function(e,t){return!!i[e]&&i[e].has(t)}}(o,W,B)}),[o,W,B]),F=k.x,X=k.y,Y=b.keys.map((function(e){return F(e)})),U=k.x.bandwidth(),q=k.y.bandwidth(),G=U/q,H=_extends({},s,{className:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("cell",m)}),Q=S.map((function(e){if(!W.has(e.id))return null;var n=X(e.id),i=e.value,r=e.size;return e.value.map((function(o,a){var s=b.keys[a];if(!E(e.id,s))return null;var u=V(i[a]),c=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(v,u),d=2*(isFinite(r[a])?D(r[a]):I);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(f,_extends({key:"cell-"+e.index+"-"+a,component:l,data:{id:e.id,key:s,data:i[a],size:r[a]},props:_extends({},H,{cellValue:i[a],cellSize:r[a],x:Y[a],y:n,width:O?G>1?d*G:d:U,height:O?G>1?d:d/G:q,style:c})},g))}))})).flat().filter(Boolean);if(0===Q.length&&!x)return null;var T=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(z);return T.scales.color=V,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:y?"heatmap-cells":void 0,children:[Q,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.irH,{value:T,children:x},"provider")]})},oe=["ids","keys","interactive","edgeAnimation","tooltipAlign","className","setRole","style"],HeatMapHighlightMask=function HeatMapHighlightMask(e,t,n,i,r){var o=t[0],a=t[1],l={initial:r?{width:0,height:0}:void 0,style:n,className:i};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0])}},l),"top-left"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate("+o+",0)rotate(90)",animate:{height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(o-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][1]),width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0])}},l),"top-right"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate(0,"+a+")rotate(-90)",animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(a-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][1]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0])}},l),"bottom-left"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate("+o+","+a+")rotate(180)",animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(o-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][1]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(a-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][1])}},l),"bottom-right")]})},HeatMapHighlight=function HeatMapHighlight(t){var a=t.ids,l=t.keys,s=t.interactive,u=void 0===s||s,h=t.edgeAnimation,m=void 0!==h&&h,v=t.tooltipAlign,p=void 0===v?[.5,.5]:v,y=t.className,x=t.setRole,g=void 0===x||x,b=t.style,z=_objectWithoutPropertiesLoose(t,oe),k=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),S=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,_=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Bs9)().size,C=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),M=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),R=M[0],L=M[1],A=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0),X=A[0],Y=A[1],U=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lLG)().setData,q=k.data,G=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(a,l,k),H=G.idSet,Q=G.keySet,T=G.idArray,Z=G.keyArray;if(!isHeatMapSetting(q,S))return null;var $=S.x,ee=S.y,te=S.color,ne=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n,i){return[(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ax7)(e,i),(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ax7)(t,n)]}($,ee,H,Q)}),[$,ee,H,Q]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(!u){var e=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(ne[0]),t=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(ne[1]);L([e,t])}}),[ne,L]);var ie=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var t;null==(t=z.handlers)||null==t.onClick||t.onClick(X,e)}),[X,z.handlers]),re=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var t;null==(t=z.handlers)||null==t.onMouseLeave||t.onMouseLeave(X,e),L(null),U({})}),[X,L,U,z.handlers]),ae=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var t;if(null!==C&&null!==C.current){var n=C.current.getBoundingClientRect(),i=n.x,r=n.y,o=[e.clientX-i,e.clientY-r];if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.sn2)(o,R)){var a=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.CXu)(o,ne),l=a.indexes,s=a.zone;if(null!==s){var u=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.ueV)([s[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0],s[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0]],(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gCP)(s),p),h=u[0],f=u[1],m=l[0],v=l[1],y=T[v],x=Z[m],g=q[v].value[m],b=q[v].size[m],k={id:y,key:x,data:g,size:b,label:(null===g||isNaN(Number(g))?"":"value: "+g)+" "+(null===b||isNaN(Number(b))?"":"size: "+b),color:te(g)};null==(t=z.handlers)||null==t.onMouseEnter||t.onMouseEnter(k,e),Y(k),U({x:h,y:f,title:y+", "+x,data:[k]}),L(s)}else re(e)}}}),[ne,C,R,L,z.handlers]),le=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{ref:C,role:g?"heatmap-detector":void 0,width:_[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],height:_[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],style:{opacity:0},onMouseMove:ae,onMouseLeave:re,onClick:ie},"detector"),se=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("heatmap-highlight",y);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:"heatmap-highlight",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.JjT,{role:g?"heatmap-highlight-mask":void 0,visible:null!==R,firstRender:!1,children:null===R?null:HeatMapHighlightMask(R,_,b,se,m)},"mask"),u?le:null]})},getInterval=function getInterval(e,t,n){var i=t.bandwidth(),r=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(Array.from(e).map(t));return[r[0]-n[0]*i,r[1]+n[1]*i]},HeatMapSurface=function HeatMapSurface(e){var t=e.ids,n=e.keys,i=e.expansion,r=void 0===i?[[0,0],[0,0]]:i,o=e.className,a=e.setRole,l=void 0===a||a,u=e.style,c=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),d=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,h=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(t,n,c),f=h.idSet,m=h.keySet;if(0===f.size||0===m.size)return null;var v=getInterval(f,d.y,r[0]),p=getInterval(m,d.x,r[1]),y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("heatmapSurface",o),x={x:p[0],y:v[0],width:p[1]-p[0],height:v[1]-v[0]};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,{role:l?"heatmap-surface":void 0,initial:x,animate:x,className:y,style:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.dJS)(u,x)},"s-"+Array.from(f).join(",")+"-"+Array.from(m).join(","))},ae=["container","data","horizontal","scaleIndex","scaleMembership","scaleColor","children"],le={variant:"band",padding:.25},UpSet=function UpSet(t){var n=t.container,i=void 0===n?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.WdC:n,r=t.data,o=t.horizontal,s=void 0===o||o,f=t.scaleIndex,m=void 0===f?le:f,v=t.scaleMembership,z=void 0===v?le:v,S=t.scaleColor,_=t.children,w=_objectWithoutPropertiesLoose(t,ae),N=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FgM)(),j=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.uK4)(i),C=j.dimsProps,M=j.origin,P=j.innerSize,R=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(r)}),[r]),L=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return r.map((function(e){return e.id}))}),[r]),A=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n){var i={};e.map((function(e,t){var n=1<<t;new Set(e.data).forEach((function(e){var t=String(e);i[t]||(i[t]=0),i[t]+=n}))}));var r=Array(Math.pow(2,e.length)).fill(0);Object.values(i).forEach((function(e){r[e]+=1}));var o=r.map((function(e,t){return e?[t,e]:null})).filter(Boolean);return o.sort((function(e,t){return t[1]-e[1]})),{keys:o.map((function(e){return String(e[0])})),processedData:e.map((function(e,t){var i=e.id,r=1<<t;return{id:i,index:t,horizontal:n,data:o.map((function(e){return(e[0]&r)>0?e[1]:0}))}}))}}(r,0,s)}),[r,L,s]),W=A.keys,B=A.processedData,V=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n,i,r,o){var a=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(i);a.domain=e;var l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(r);l.domain=t;var s={x:n?l:a,y:n?a:l};return s.x.size=o[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],s.y.size=o[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],s}(L,W,s,m,z,P)}),[L,W,s,m,z,C]),D=V.x,I=V.y,O=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(null!=S?S:N.Color.categorical,[""]),E=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.cT_)({x:D,y:I,color:O});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.PzT,_extends({variant:"upset",position:M,size:C.size,padding:C.padding,originalData:r,processedData:B,seriesIndexes:R,keys:W,scalesContextValue:E},w,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_3__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_4__.H,children:_})}))},isUpSetData=function isUpSetData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"data"in e})).every(Boolean)},isUpSetProcessedData=function isUpSetProcessedData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"index"in e&&"data"in e})).every(Boolean)},se=["size","padding","scaleIndex","scaleValue","scaleColor","children"],UpSetBar=function UpSetBar(t){var n=t.size,i=t.padding,r=void 0===i?[0,0,0,0]:i,o=t.scaleIndex,a=void 0===o?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Us:o,l=t.scaleValue,s=void 0===l?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Tx9:l,u=t.scaleColor,h=t.children,f=_objectWithoutPropertiesLoose(t,se),m=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),v=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Bs9)(),p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,y=m.data;if(!isUpSetProcessedData(y)||0==y.length)return null;var x=y[0].horizontal,g=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t){var n=[];return t.map((function(t,i){var r=0;e.map((function(e){e.data[i]&&(r=e.data[i])})),n.push({id:t,value:r})})),n}(y,m.keys)}),[y,m]),b=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n){return{position:e?[0,-t]:[n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],0],size:e?[n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],t]:[t,n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]]}}(x,n,v.size)}),[x,v]),z={position:b.position,positionUnits:"absolute",size:b.size,sizeUnits:"absolute",padding:r};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_band__WEBPACK_IMPORTED_MODULE_6__.$Q,_extends({container:z,data:g,keys:["value"],horizontal:!x,scaleIndex:a,scaleValue:s,scaleColor:null!=u?u:{variant:"categorical",domain:p.color.domain(),colors:[p.color(0)]}},f,{children:h}))},UpSetGrid=function UpSetGrid(e){var n=e.symbol,i=void 0===n?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Cdc:n,r=e.symbolStyle,o=e.className,a=e.setRole,l=void 0!==a&&a,s=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),u=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,c=s.data;if(!isUpSetProcessedData(c)||0==c.length)return null;var d=c[0].horizontal,h=d?u.y:u.x,f=d?u.x:u.y,m=Math.min(h.bandwidth(),f.bandwidth())/2,v=h.domain().map((function(e,n){var a=h(e);return f.domain().map((function(e,s){var u=f(e);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(i,{key:"cell-"+n+"-"+s,cx:d?u:a,cy:d?a:u,r:m,className:o,style:r,setRole:l})}))})).flat().filter(Boolean);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("g",{role:"upset-grid",children:v})},UpSetMembership=function UpSetMembership(e){var n=e.positions,i=e.r,r=e.symbol,o=void 0===r?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Cdc:r,a=e.line,l=void 0===a?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.x12:a,s=e.symbolStyle,u=e.lineStyle,h=e.className,m=e.setRole,v=void 0!==m&&m,p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(n.map((function(e){return e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X]}))),y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(n.map((function(e){return e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]}))),x=p[0]!=p[1]||y[0]!=y[1],g=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("upSetMembership",h),b=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(l,{key:"line",x1:p[0],x2:p[1],y1:y[0],y2:y[1],style:u,className:g,setRole:v}),z=n.map((function(e,n){return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(o,{key:"symbol-"+n,cx:e[0],cy:e[1],r:i,style:s,className:g,setRole:v})}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:"upset-membership",children:[x?b:null,z]})},UpSetMemberships=function UpSetMemberships(e){var n=e.component,i=void 0===n?UpSetMembership:n,r=e.componentProps,o=e.symbol,a=e.line,l=e.symbolStyle,s=e.lineStyle,u=e.style,c=e.className,d=e.setRole,h=void 0===d||d,f=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),m=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,v=f.data;if(!isUpSetProcessedData(v)||0==v.length)return null;var p=v[0].horizontal,y=p?m.y:m.x,x=p?m.x:m.y,g=m.color,b=Math.min(y.bandwidth(),x.bandwidth())/2,z=v.map((function(e){return e.id})),k=_extends({setRole:!1},r,{r:b,symbol:o,symbolStyle:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(l,g("")),line:a,lineStyle:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(s,g("")),className:c}),S=f.keys.map((function(e,n){var r=[];return z.map((function(t,i){v[i].data[n]>0&&r.push([y(t),x(e)])})),p&&(r=r.map((function(e){return[e[1],e[0]]}))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(i,_extends({key:"m-"+e},k,{positions:r}))}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("g",{role:h?"upset-memberships":void 0,style:u,children:S})}}}]);