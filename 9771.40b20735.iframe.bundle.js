"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[9771],{"./packages/matrix/dist/chsk-matrix.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Br:()=>HeatMap,D6:()=>UpSetBar,F0:()=>UpSet,WL:()=>HeatMapCells,Wf:()=>isHeatMapData,ad:()=>HeatMapHighlight,by:()=>isUpSetData,eT:()=>HeatMapRectangle,hI:()=>UpSetGrid,iC:()=>UpSetMemberships,jE:()=>HeatMapSurface,oT:()=>HeatMapCircle});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),framer_motion__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/framer-motion/dist/es/components/LazyMotion/index.mjs"),framer_motion__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/features-animation.mjs"),framer_motion__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion-minimal.mjs"),_chsk_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_chsk_band__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./packages/band/dist/chsk-band.es.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}var T=["container","keys","data","dataSize","scaleX","scaleY","scaleColor","scaleSize","children"],Z={variant:"band",padding:0},HeatMap=function HeatMap(t){var n=t.container,i=void 0===n?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.WdC:n,r=t.keys,a=t.data,s=t.dataSize,w=t.scaleX,_=void 0===w?Z:w,N=t.scaleY,j=void 0===N?Z:N,C=t.scaleColor,M=t.scaleSize,L=void 0===M?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ooi:M,P=t.children,A=_objectWithoutPropertiesLoose(t,T),R=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FgM)(),W=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.uK4)(i),B=W.dimsProps,V=W.origin,D=W.innerSize,I=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(a)}),[a]),O=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return a.map((function(e){return e.id}))}),[a]),E=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n){var i=e.map((function(e){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIU)(e)})),r=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(n);return t.map((function(e,t){var a=e.id,o=r[a],l=void 0!==o&&void 0!==n?n[o]:{id:a};return{id:a,index:t,value:i.map((function(t){return t(e)})),size:i.map((function(e){return Number(e(l))}))}}))}(r,a,s)}),[r,a,s]),F=function(e,t,n,i,r){var a={x:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(n),y:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(i)};return a.x.domain=t,a.x.size=r[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],a.y.domain=e,a.y.size=r[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],a}(O,r,_,j,D),X=F.x,Y=F.y,U=function(e,t){if("categorical"===t.variant){var n=new Set(e.map((function(e){return e.value})).flat().map(String));return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(t,Array.from(n))}var i=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(e.map((function(e){return e.value})).flat().map(Number).filter(isFinite));return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(t,i)}(E,null!=C?C:R.Colors.sequential),q=function(e,t,n,i,r){var a=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Fp7)(e.map((function(e){return e.size})).flat()),o=Math.min(n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]/i.length,n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X]/r.length)/2;return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__._C2)(t,a,o)}(E,L,D,O,r),G=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.cT_)({x:X,y:Y,color:U,size:q});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.PzT,_extends({variant:"heatmap",position:V,size:B.size,padding:B.padding,originalData:a,processedData:E,seriesIndexes:I,keys:r,scalesContextValue:G},A,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_3__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_4__.H,children:P})}))},ee=["x","y","width","height","style"],HeatMapCircle=function HeatMapCircle(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=e.style,o=_objectWithoutPropertiesLoose(e,ee),l={fill:null==a?void 0:a.fill,r:Math.min(i,r)/2};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.circle,_extends({initial:l,animate:l,cx:t,cy:n,style:_extends({},a,{fill:void 0})},o))},te=["x","y","width","height"],HeatMapSimpleRectangle=function HeatMapSimpleRectangle(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=_objectWithoutPropertiesLoose(e,te);return delete a.cellSize,delete a.cellValue,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",_extends({x:t-i/2,y:n-r/2,height:r,width:i},a))},ne=["x","y","width","height","style"],HeatMapRectangle=function HeatMapRectangle(e){var t=e.x,n=e.y,i=e.width,r=e.height,a=e.style,o=_objectWithoutPropertiesLoose(e,ne),l={fill:null==a?void 0:a.fill};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({initial:l,animate:l,x:t-i/2,y:n-r/2,height:r,width:i,style:_extends({},a,{fill:void 0})},o))},isHeatMapData=function isHeatMapData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e})).every(Boolean)},isHeatMapSetting=function isHeatMapSetting(e,t){return function isHeatMapProcessedData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"index"in e&&"value"in e&&"size"in e})).every(Boolean)}(e)&&(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.y7R)(t.x)&&(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.y7R)(t.y)},ie=["ids","keys","cells","cell","scaleColor","scaleSize","dataComponent","className","style","children"],HeatMapCells=function HeatMapCells(n){var i=n.ids,r=n.keys,a=n.cells,o=n.cell,l=void 0===o?HeatMapSimpleRectangle:o,s=n.scaleColor,c=n.scaleSize,d=n.dataComponent,h=void 0===d?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Wnl:d,f=n.className,m=n.style,v=n.children,y=_objectWithoutPropertiesLoose(n,ie),p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),x=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)(),g=x.scales,b=p.data,z=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(i,r,p),k=z.idSet,S=z.keySet;if(!isHeatMapSetting(b,g))return null;var w=s?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.rio)(s):g.color,W=c?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Pur)(c):g.size,B=W(W.domain()[1]),V=isFinite(B),D=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n){var i={};return e?e.forEach((function(e){var t=e[0],n=e[1];i[t]||(i[t]=new Set),i[t].add(n)})):Array.from(t).forEach((function(e){i[e]=n})),function(e,t){return!!i[e]&&i[e].has(t)}}(a,k,S)}),[a,k,S]),I=g.x,O=g.y,E=p.keys.map((function(e){return I(e)})),F=g.x.bandwidth(),X=g.y.bandwidth(),Y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("cell",f),U=F/X,q=b.map((function(e){if(!k.has(e.id))return null;var n=O(e.id),i=e.value,r=e.size;return e.value.map((function(a,o){var s=p.keys[o];if(!D(e.id,s))return null;var u=w(i[o]),c=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(m,u),d=2*(isFinite(r[o])?W(r[o]):B);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(h,_extends({key:"cell-"+e.index+"-"+o,component:l,data:{id:e.id,key:s,data:i[o],size:r[o]},props:{cellValue:i[o],cellSize:r[o],x:E[o],y:n,width:V?U>1?d*U:d:F,height:V?U>1?d:d/U:X,className:Y,style:c}},y))}))})).flat().filter(Boolean);if(0===q.length&&!v)return null;var G=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(x);return G.scales.color=w,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:"heatmap-cells",children:[q,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.irH,{value:G,children:v},"provider")]})},re=["ids","keys","interactive","edgeAnimation","tooltipAlign","className","setRole","style"],HeatMapHighlightMask=function HeatMapHighlightMask(e,t,n,i,r){var a=t[0],o=t[1],l={initial:r?{width:0,height:0}:void 0,style:n,className:i};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0])}},l),"top-left"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate("+a+",0)rotate(90)",animate:{height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(a-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][1]),width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0])}},l),"top-right"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate(0,"+o+")rotate(-90)",animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(o-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][1]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0])}},l),"bottom-left"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,_extends({transform:"translate("+a+","+o+")rotate(180)",animate:{width:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(a-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][1]),height:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.UYe)(o-e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][1])}},l),"bottom-right")]})},HeatMapHighlight=function HeatMapHighlight(t){var o=t.ids,l=t.keys,s=t.interactive,u=void 0===s||s,h=t.edgeAnimation,m=void 0!==h&&h,v=t.tooltipAlign,y=void 0===v?[.5,.5]:v,p=t.className,x=t.setRole,g=void 0===x||x,b=t.style,z=_objectWithoutPropertiesLoose(t,re),k=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),S=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,w=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Bs9)().size,C=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),M=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null),P=M[0],A=M[1],R=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0),X=R[0],Y=R[1],U=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lLG)().setData,q=k.data,G=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(o,l,k),K=G.idSet,Q=G.keySet,T=G.idArray,Z=G.keyArray;if(!isHeatMapSetting(q,S))return null;var $=S.x,ee=S.y,te=S.color,ne=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n,i){return[(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ax7)(e,i),(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Ax7)(t,n)]}($,ee,K,Q)}),[$,ee,K,Q]);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){if(!u){var e=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(ne[0]),t=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(ne[1]);A([e,t])}}),[ne,A]);var ie=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var t;null==(t=z.handlers)||null==t.onClick||t.onClick(X,e)}),[X,z.handlers]),ae=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var t;null==(t=z.handlers)||null==t.onMouseLeave||t.onMouseLeave(X,e),A(null),U({})}),[X,A,U,z.handlers]),oe=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var t;if(null!==C&&null!==C.current){var n=C.current.getBoundingClientRect(),i=n.x,r=n.y,a=[e.clientX-i,e.clientY-r];if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.sn2)(a,P)){var o=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.CXu)(a,ne),l=o.indexes,s=o.zone;if(null!==s){var u=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.ueV)([s[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X][0],s[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y][0]],(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gCP)(s),y),h=u[0],f=u[1],m=l[0],v=l[1],p=T[v],x=Z[m],g=q[v].value[m],b=q[v].size[m],k={id:p,key:x,data:g,size:b,label:(null===g||isNaN(Number(g))?"":"value: "+g)+" "+(null===b||isNaN(Number(b))?"":"size: "+b),color:te(g)};null==(t=z.handlers)||null==t.onMouseEnter||t.onMouseEnter(k,e),Y(k),U({x:h,y:f,title:p+", "+x,data:[k]}),A(s)}else ae(e)}}}),[ne,C,P,A,z.handlers]),le=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{ref:C,role:g?"heatmap-detector":void 0,width:w[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],height:w[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],style:{opacity:0},onMouseMove:oe,onMouseLeave:ae,onClick:ie}),se=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("heatmap-highlight",p);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:"heatmap-highlight",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.JjT,{role:g?"heatmap-highlight-mask":void 0,visible:null!==P,firstRender:!1,children:null===P?null:HeatMapHighlightMask(P,w,b,se,m)},"heatmap-highlight-mask"),u?le:null]})},getInterval=function getInterval(e,t,n){var i=t.bandwidth(),r=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(Array.from(e).map(t));return[r[0]-n[0]*i,r[1]+n[1]*i]},HeatMapSurface=function HeatMapSurface(e){var t=e.ids,n=e.keys,i=e.expansion,r=void 0===i?[[0,0],[0,0]]:i,a=e.className,o=e.setRole,l=void 0!==o&&o,u=e.style,c=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),d=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,h=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(t,n,c),f=h.idSet,m=h.keySet;if(0===f.size||0===m.size)return null;var v=getInterval(f,d.y,r[0]),y=getInterval(m,d.x,r[1]),p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("heatmapSurface",a);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("g",{role:"heatmap-surface",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.m.rect,{x:y[0],width:y[1]-y[0],y:v[0],height:v[1]-v[0],role:l?"heatmap-surface":void 0,className:p,style:u},"surface-"+Array.from(f).join(",")+"-"+Array.from(m).join(","))})},ae=["container","data","horizontal","scaleIndex","scaleMembership","scaleColor","children"],oe={variant:"band",padding:.25},UpSet=function UpSet(t){var n=t.container,i=void 0===n?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.WdC:n,r=t.data,a=t.horizontal,s=void 0===a||a,f=t.scaleIndex,m=void 0===f?oe:f,v=t.scaleMembership,z=void 0===v?oe:v,S=t.scaleColor,w=t.children,_=_objectWithoutPropertiesLoose(t,ae),N=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FgM)(),j=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.uK4)(i),C=j.dimsProps,M=j.origin,L=j.innerSize,P=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(r)}),[r]),A=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return r.map((function(e){return e.id}))}),[r]),R=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n){var i={};e.map((function(e,t){var n=1<<t;new Set(e.data).forEach((function(e){var t=String(e);i[t]||(i[t]=0),i[t]+=n}))}));var r=Array(Math.pow(2,e.length)).fill(0);Object.values(i).forEach((function(e){r[e]+=1}));var a=r.map((function(e,t){return e?[t,e]:null})).filter(Boolean);return a.sort((function(e,t){return t[1]-e[1]})),{keys:a.map((function(e){return String(e[0])})),processedData:e.map((function(e,t){var i=e.id,r=1<<t;return{id:i,index:t,horizontal:n,data:a.map((function(e){return(e[0]&r)>0?e[1]:0}))}}))}}(r,0,s)}),[r,A,s]),W=R.keys,B=R.processedData,V=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n,i,r,a){var o=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(i);o.domain=e;var l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.BRZ)(r);l.domain=t;var s={x:n?l:o,y:n?o:l};return s.x.size=a[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],s.y.size=a[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y],s}(A,W,s,m,z,L)}),[A,W,s,m,z,C]),D=V.x,I=V.y,O=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.NVB)(null!=S?S:N.Colors.categorical,[""]),E=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.cT_)({x:D,y:I,color:O});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.PzT,_extends({variant:"upset",position:M,size:C.size,padding:C.padding,originalData:r,processedData:B,seriesIndexes:P,keys:W,scalesContextValue:E},_,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_3__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_4__.H,children:w})}))},isUpSetData=function isUpSetData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"data"in e})).every(Boolean)},isUpSetProcessedData=function isUpSetProcessedData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"index"in e&&"data"in e})).every(Boolean)},le=["size","padding","scaleIndex","scaleValue","scaleColor","children"],UpSetBar=function UpSetBar(t){var n=t.size,i=t.padding,r=void 0===i?[0,0,0,0]:i,a=t.scaleIndex,o=void 0===a?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Us:a,l=t.scaleValue,s=void 0===l?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Tx9:l,u=t.scaleColor,h=t.children,f=_objectWithoutPropertiesLoose(t,le),m=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),v=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Bs9)(),y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,p=m.data;if(!isUpSetProcessedData(p)||0==p.length)return null;var x=p[0].horizontal,g=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t){var n=[];return t.map((function(t,i){var r=0;e.map((function(e){e.data[i]&&(r=e.data[i])})),n.push({id:t,value:r})})),n}(p,m.keys)}),[p,m]),b=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,t,n){return{position:e?[0,-t]:[n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],0],size:e?[n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],t]:[t,n[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]]}}(x,n,v.size)}),[x,v]),z={position:b.position,positionUnits:"absolute",size:b.size,sizeUnits:"absolute",padding:r};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_band__WEBPACK_IMPORTED_MODULE_6__.$Q,_extends({container:z,data:g,keys:["value"],horizontal:!x,scaleIndex:o,scaleValue:s,scaleColor:null!=u?u:{variant:"categorical",domain:y.color.domain(),colors:[y.color(0)]}},f,{children:h}))},UpSetGrid=function UpSetGrid(e){var n=e.symbol,i=void 0===n?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Cdc:n,r=e.symbolStyle,a=e.className,o=e.setRole,l=void 0!==o&&o,s=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),u=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,c=s.data;if(!isUpSetProcessedData(c)||0==c.length)return null;var d=c[0].horizontal,h=d?u.y:u.x,f=d?u.x:u.y,m=Math.min(h.bandwidth(),f.bandwidth())/2,v=h.domain().map((function(e,n){var o=h(e);return f.domain().map((function(e,s){var u=f(e);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(i,{key:"cell-"+n+"-"+s,cx:d?u:o,cy:d?o:u,r:m,className:a,style:r,setRole:l})}))})).flat().filter(Boolean);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("g",{role:"upset-grid",children:v})},UpSetMembership=function UpSetMembership(e){var n=e.positions,i=e.r,r=e.symbol,a=void 0===r?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Cdc:r,o=e.line,l=void 0===o?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.x12:o,s=e.symbolStyle,u=e.lineStyle,h=e.className,m=e.setRole,v=void 0!==m&&m,y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(n.map((function(e){return e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X]}))),p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(n.map((function(e){return e[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]}))),x=y[0]!=y[1]||p[0]!=p[1],g=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.gjB)("upSetMembership",h),b=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(l,{key:"line",x1:y[0],x2:y[1],y1:p[0],y2:p[1],style:u,className:g,setRole:v}),z=n.map((function(e,n){return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(a,{key:"symbol-"+n,cx:e[0],cy:e[1],r:i,style:s,className:g,setRole:v})}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:"upset-membership",children:[x?b:null,z]})},UpSetMemberships=function UpSetMemberships(e){var n=e.component,i=void 0===n?UpSetMembership:n,r=e.symbol,a=e.line,o=e.symbolStyle,l=e.lineStyle,s=e.style,u=e.className,c=e.setRole,d=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.wIO)(),h=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,f=d.data;if(!isUpSetProcessedData(f)||0==f.length)return null;var m=f[0].horizontal,v=m?h.y:h.x,y=m?h.x:h.y,p=h.color,x=Math.min(v.bandwidth(),y.bandwidth())/2,g=f.map((function(e){return e.id})),b=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(o,p("")),z=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.hIX)(l,p("")),k=d.keys.map((function(e,n){var o=[];return g.map((function(t,i){f[i].data[n]>0&&o.push([v(t),y(e)])})),m&&(o=o.map((function(e){return[e[1],e[0]]}))),(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(i,{key:"membership-"+e,positions:o,r:x,symbol:r,symbolStyle:b,line:a,lineStyle:z,className:u,setRole:c})}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("g",{role:"upset-memberships",style:s,children:k})}}}]);