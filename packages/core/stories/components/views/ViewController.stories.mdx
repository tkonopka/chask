import { ArgsTable, Canvas, Meta, Source, Story } from '@storybook/addon-docs'
import { ViewController } from '../../../src'
import {
    ChartForControllerDecorator,
    ChartWithBandsForControllerDecorator,
    ChartWithTimeForControllerDecorator,
} from './decorators'

# ViewController

<Meta title="Core/Components/Views/ViewController" />
export const Template = args => <ViewController {...args} />

`ViewController` is component for managing user interactions and view state. It provides some invisible elements that can detect mouse motions, and a toolbar to toggle between interaction modes.

<ArgsTable of={ViewController} />

## Variants

Prop `variant` determines the type of interactions for the view.
The default value `xy` allows pan and zoom operations along both the x- an y- axes.

(In the examples below, use the toolbar to select an action, the click/drag on the view surface.)

<Canvas>
    <Story
        name="default"
        args={{
            variant: 'xy',
            itemSize: [55, 26],
            itemAlign: [0, 0.5],
            itemPadding: [4, 4, 4, 4],
            itemStyle: { textAnchor: 'start' },
        }}
        component={ViewController}
        decorators={[ChartForControllerDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

Variants `x` and `y` restrict view changes to the corresponding axes.

<Canvas>
    <Story
        name="x"
        args={{
            variant: 'x',
            itemSize: [55, 26],
            itemAlign: [0, 0.5],
            itemPadding: [4, 4, 4, 4],
            itemStyle: { textAnchor: 'start' },
        }}
        component={ViewController}
        decorators={[ChartForControllerDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="y"
        args={{
            variant: 'y',
            itemSize: [55, 26],
            itemAlign: [0, 0.5],
            itemPadding: [4, 4, 4, 4],
            itemStyle: { textAnchor: 'start' },
        }}
        component={ViewController}
        decorators={[ChartForControllerDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

Note that in these examples, the x- and y- axes both initially have a [0, 100] domain.
However, they rescale slightly differently upon zoom-in and zoom-out.
This is because the specifications for the x- and y- axes (props `scaleX` and `scaleY` in the view component)
have the attribute `nice` set to `false` and `true`, respectively.

## Toolbar layout

The toolbar can be restricted or re-arranged with prop `values`, accepting an array of button codes.
Prop `value` sets the default toolbar state.

Prop `horizontal` toggles the orientation of the toolbar, and prop `container` determines its
overall position within/beside the view.

<Canvas>
    <Story
        name="custom toolbar"
        args={{
            values: ['none', 'pan', 'zoom', 'reset'],
            value: 'pan',
            container: { position: [1, 0], positionUnits: 'relative', anchor: [1, 1] },
            horizontal: true,
            itemSize: [65, 26],
            itemAlign: [1, 0.5],
            itemPadding: [4, 4, 4, 4],
            itemStyle: { textAnchor: 'end' },
        }}
        component={ViewController}
        decorators={[ChartForControllerDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Scales

Zoom and pan operations work on all scale types, including logarithmic scales, time scales, and band scales.

<Canvas>
    <Story
        name="band scales"
        args={{
            value: 'pan',
            itemSize: [65, 26],
            itemAlign: [0, 0.5],
            itemPadding: [4, 4, 4, 4],
            itemStyle: { textAnchor: 'start' },
        }}
        component={ViewController}
        decorators={[ChartWithBandsForControllerDecorator]}
    >
        {Template.bind({})}
    </Story>
    <Story
        name="time and log scales"
        args={{
            value: 'pan',
            itemSize: [65, 26],
            itemAlign: [0, 0.5],
            itemPadding: [4, 4, 4, 4],
            itemStyle: { textAnchor: 'start' },
        }}
        component={ViewController}
        decorators={[ChartWithTimeForControllerDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Zoom box styling

Prop `boxStyle` applies styles to the box that appears when selecting a custom zoom region.

<Canvas>
    <Story
        name="zoom box"
        args={{
            variant: 'xy',
            itemSize: [55, 26],
            itemAlign: [0, 0.5],
            itemPadding: [4, 4, 4, 4],
            itemStyle: { textAnchor: 'start' },
            boxStyle: { strokeWidth: 2, strokeDasharray: 6, fill: '#dd2222' },
            value: 'zoom',
            values: ['zoom', 'reset'],
        }}
        component={ViewController}
        decorators={[ChartForControllerDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

## Custom buttons

By default, the buttons in the toolbar are created using a plain `Button` component.
This can be replaced by setting prop `component`.
For examples of toolbars with icons, see the charts in the gallery.

Prop `modifiers` sets style modifiers for the buttons upon mouse events.
