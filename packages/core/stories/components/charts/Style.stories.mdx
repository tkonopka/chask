import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs'
import { Style, emptyTheme } from '../../../src'
import { DivDecorator } from '../decorators'

# Style

<Meta title="Core/Components/Charts/Style" />
export const Template = args => <Style {...args} />

`Style` generates an HTML / SVG `style` component holding css definitions.

<ArgsTable of={Style} />

## Usage

The `Style` component is called within the `Chart` component and, by default,
all theme styles are automatically applied to each new chart.
Thus, it is usually not necessary to use `Style` manually.

However, if a web page contains many charts with the same theme,
it may be possible to optimise performance by applying `Style` with bespoke settings.
This is because under default settings, each chart on a page creates its own copy of css definitions.
Many copies of equivalent css definitions can add unnecessarily to the overall page size
(the default theme leads to around 3kb of css).

To avoid redundant css, the `Style` component can be called manually to generate style definitions with an
appropriate scoping selector.
To remove scoped css from subsequent charts, set the prop `selectors` in each `Chart` to `null`.

## Base theme and custom theme

`Style` accepts two props with theme objects, `baseTheme` and `theme`. These objects are
merged, and the used to generate css definitions.

<Canvas>
    <Story
        name="themes"
        args={{
            ancestor: '',
            baseTheme: emptyTheme,
            theme: { text: { title: { fontSize: '28px' } } },
            children: (
                <span>
                    Check 'style' tag in the console (<code>Ctrl Shift C</code>)
                </span>
            ),
        }}
        component={Style}
        decorators={[DivDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>

Open the console with `Ctrl Shift C`, find the elements corresponding to the example above,
and find the adjacent `style` element. It should contain a short css definition styling text elements.

## Ancestor

Prop `ancestor` limits the scope of the output css to a specified ancestor.
This can be used to limit styles to a specific chart via an identifier, or to a group of charts
with a broader selector.

<Canvas>
    <Story
        name="ancestor"
        args={{
            ancestor: 'svg.chsk',
            children: (
                <span>
                    Check 'style' tag in the console (<code>Ctrl Shift C</code>)
                </span>
            ),
        }}
        component={Style}
        decorators={[DivDecorator]}
    >
        {Template.bind({})}
    </Story>
</Canvas>
