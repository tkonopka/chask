"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[6529,428],{"./node_modules/@mdx-js/react/lib/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{NF:()=>withMDXComponents,Zo:()=>MDXProvider,ah:()=>useMDXComponents,pC:()=>MDXContext});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const MDXContext=react__WEBPACK_IMPORTED_MODULE_0__.createContext({});function withMDXComponents(Component){return function boundMDXComponent(props){const allComponents=useMDXComponents(props.components);return react__WEBPACK_IMPORTED_MODULE_0__.createElement(Component,{...props,allComponents})}}function useMDXComponents(components){const contextComponents=react__WEBPACK_IMPORTED_MODULE_0__.useContext(MDXContext);return react__WEBPACK_IMPORTED_MODULE_0__.useMemo((()=>"function"==typeof components?components(contextComponents):{...contextComponents,...components}),[contextComponents,components])}const emptyObject={};function MDXProvider({components,children,disableParentContext}){let allComponents;return allComponents=disableParentContext?"function"==typeof components?components({}):components||emptyObject:useMDXComponents(components),react__WEBPACK_IMPORTED_MODULE_0__.createElement(MDXContext.Provider,{value:allComponents},children)}},"./packages/band/stories/dendrogram/DendrogramSurface.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AllLevels:()=>AllLevels,Expansion:()=>Expansion,Interactivity:()=>Interactivity,SelectedLevels:()=>SelectedLevels,Subset:()=>Subset,__namedExportsOrder:()=>__namedExportsOrder,default:()=>DendrogramSurface_stories});var chsk_core_es=__webpack_require__("./packages/core/dist/chsk-core.es.js"),context=__webpack_require__("./packages/band/src/dendrogram/context.tsx"),react=__webpack_require__("./node_modules/react/index.js"),predicates=__webpack_require__("./packages/band/src/dendrogram/predicates.ts"),utils=__webpack_require__("./packages/band/src/dendrogram/utils.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var DendrogramSurface=function DendrogramSurface(_ref){var levels=_ref.levels,ids=_ref.ids,keys=_ref.keys,_ref$expansion=_ref.expansion,expansion=void 0===_ref$expansion?[0,0,0,0]:_ref$expansion,_ref$expansionUnit=_ref.expansionUnit,expansionUnit=void 0===_ref$expansionUnit?"band":_ref$expansionUnit,_ref$component=_ref.component,component=void 0===_ref$component?chsk_core_es.AeJ:_ref$component,componentProps=_ref.componentProps,_ref$dataComponent=_ref.dataComponent,dataComponent=void 0===_ref$dataComponent?chsk_core_es.Aj5:_ref$dataComponent,_ref$interactive=_ref.interactive,interactive=void 0!==_ref$interactive&&_ref$interactive,handlers=_ref.handlers,modifiers=_ref.modifiers,className=_ref.className,style=_ref.style,_ref$setRole=_ref.setRole,setRole=void 0===_ref$setRole||_ref$setRole,originalData=(0,chsk_core_es.W3B)().data,preparedData=(0,context._$)(),scales=(0,chsk_core_es.kE1)().scales,horizontal=(0,chsk_core_es.y7R)(scales.y),_useState=(0,react.useState)(void 0),active=_useState[0],setActive=_useState[1],indexScale=horizontal?scales.y:scales.x,_useIdsKeys=(0,chsk_core_es.lRm)(ids,keys,preparedData),idSet=_useIdsKeys.idSet,keyArray=_useIdsKeys.keyArray;if(!(0,predicates.T)(originalData))return null;var expansionMultiplier="band"===expansionUnit?indexScale.bandwidth():indexScale.step(),absExpansion=expansion.map((function(v){return v*expansionMultiplier})),onMouseEnter=(0,react.useCallback)((function(data,event){null==handlers||null==handlers.onMouseEnter||handlers.onMouseEnter(data,event),setActive(data)}),[handlers,setActive]),onMouseLeave=(0,react.useCallback)((function(data,event){null==handlers||null==handlers.onMouseLeave||handlers.onMouseLeave(data,event),setActive(void 0)}),[handlers,setActive]),compositeHandlers=interactive?_extends({},handlers,{onMouseEnter,onMouseLeave}):handlers,commonProps=_extends({variant:"dendrogram-surface",setRole},componentProps,{className,style}),result=preparedData.data.map((function(seriesData){var id=seriesData.id;if(!idSet.has(id))return null;var data=originalData[seriesData.index];return(0,utils.y)(seriesData,indexScale,levels,void 0===keys?keys:keyArray).map((function(level){var rectProps=function createSurfaceProps(data,index,horizontal,expansion){var positions=data.positionInterval[index],heights=data.heightInterval[index],deltaHeight=heights[1]-heights[0],deltaPosition=positions[1]-positions[0];return{x:(horizontal?heights[0]:positions[0])-expansion[chsk_core_es.RLj],y:(horizontal?positions[0]:heights[0])-expansion[chsk_core_es.GSB],width:(horizontal?deltaHeight:deltaPosition)+expansion[chsk_core_es.RLj]+expansion[chsk_core_es.pXp],height:(horizontal?deltaPosition:deltaHeight)+expansion[chsk_core_es.GSB]+expansion[chsk_core_es.DaS]}}(seriesData,level,horizontal,absExpansion),interactiveOpacity=!!interactive&&(seriesData.id===(null==active?void 0:active.id)&&level===(null==active?void 0:active.level)),fixedOpacity=!interactive;return(0,react.createElement)(dataComponent,{key:"s-"+id+"-"+level,component,data:{id,level,data},props:_extends({},commonProps,rectProps,{opacity:+(interactiveOpacity||fixedOpacity)}),handlers:compositeHandlers,modifiers})}))}));return(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:result.filter(Boolean)})};try{DendrogramSurface.displayName="DendrogramSurface",DendrogramSurface.__docgenInfo={description:"",displayName:"DendrogramSurface",props:{levels:{defaultValue:null,description:"hierarchy levels",name:"levels",required:!1,type:{name:"number[]"}},expansion:{defaultValue:{value:"[0, 0, 0, 0]"},description:"expansion",name:"expansion",required:!1,type:{name:"FourSideSizeSpec"}},expansionUnit:{defaultValue:{value:"band"},description:"expansion unit",name:"expansionUnit",required:!1,type:{name:"enum",value:[{value:'"band"'},{value:'"step"'}]}},ids:{defaultValue:null,description:"ids to display (defaults to all ids)",name:"ids",required:!1,type:{name:"string[]"}},keys:{defaultValue:null,description:"keys to display (default to all keys)",name:"keys",required:!1,type:{name:"string[]"}},className:{defaultValue:null,description:"class string",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"css style",name:"style",required:!1,type:{name:"Partial<CSSProperties>"}},setRole:{defaultValue:{value:"true"},description:"toggle role attribute in svg code",name:"setRole",required:!1,type:{name:"boolean"}},interactive:{defaultValue:{value:"false"},description:"activate interactive features",name:"interactive",required:!1,type:{name:"boolean"}},handlers:{defaultValue:null,description:"handlers for events",name:"handlers",required:!1,type:{name:"DataInteractivityHandlers<DendrogramInteractiveDataItem>"}},modifiers:{defaultValue:null,description:"style modifiers",name:"modifiers",required:!1,type:{name:"DataInteractivityModifiers"}},dataComponent:{defaultValue:null,description:"function binding data to interactivity handlers",name:"dataComponent",required:!1,type:{name:"FC<DataComponentProps<DendrogramInteractiveDataItem, RectangleProps>>"}},component:{defaultValue:null,description:"function used to draw individual components",name:"component",required:!1,type:{name:"FC<RectangleProps>"}},componentProps:{defaultValue:null,description:"props passed to each component",name:"componentProps",required:!1,type:{name:"Partial<RectangleProps>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/src/dendrogram/DendrogramSurface.tsx#DendrogramSurface"]={docgenInfo:DendrogramSurface.__docgenInfo,name:"DendrogramSurface",path:"packages/band/src/dendrogram/DendrogramSurface.tsx#DendrogramSurface"})}catch(__react_docgen_typescript_loader_error){}var _AllLevels$parameters,_AllLevels$parameters2,_AllLevels$parameters3,_SelectedLevels$param,_SelectedLevels$param2,_SelectedLevels$param3,_Subset$parameters,_Subset$parameters2,_Subset$parameters2$d,_Expansion$parameters,_Expansion$parameters2,_Expansion$parameters3,_Interactivity$parame,_Interactivity$parame2,_Interactivity$parame3,decorators=__webpack_require__("./packages/band/stories/dendrogram/decorators.tsx");function DendrogramSurface_stories_extends(){return DendrogramSurface_stories_extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},DendrogramSurface_stories_extends.apply(this,arguments)}const DendrogramSurface_stories={title:"Addons/Band/Dendrogram/DendrogramSurface",component:DendrogramSurface};var AllLevels={name:"all levels",args:{style:{fill:"#888888",fillOpacity:.5,strokeWidth:1,stroke:"#888888"}},decorators:[decorators.LL]},SelectedLevels={name:"selected levels",args:{levels:[1,2],style:{fill:"#888888",fillOpacity:.5,strokeWidth:1,stroke:"#888888"}},decorators:[decorators.LL]},Subset={name:"subset",args:{keys:["gamma","epsilon"],style:{fill:"#888888",fillOpacity:.5,strokeWidth:1,stroke:"#888888"}},decorators:[decorators.LL]},Expansion={name:"expansion",args:{levels:[2],expansion:[.5,0,.5,.5],style:{fill:"#888888",fillOpacity:.5,strokeWidth:1,stroke:"#888888"}},decorators:[decorators.LL]},Interactivity={name:"interactive",args:{interactive:!0,expansion:[.5,0,.5,.5],style:{fill:"#cccccc",stroke:"#dd0000",strokeWidth:1,cursor:"pointer"},handlers:{onClick:function onClick(data){console.log(JSON.stringify(data))}}},decorators:[decorators.LL]};AllLevels.parameters=DendrogramSurface_stories_extends({},AllLevels.parameters,{docs:DendrogramSurface_stories_extends({},null==(_AllLevels$parameters=AllLevels.parameters)?void 0:_AllLevels$parameters.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'all levels',\n  args: {\n    style: {\n      fill: '#888888',\n      fillOpacity: 0.5,\n      strokeWidth: 1,\n      stroke: '#888888'\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_AllLevels$parameters2=AllLevels.parameters)||null==(_AllLevels$parameters3=_AllLevels$parameters2.docs)?void 0:_AllLevels$parameters3.source)})}),SelectedLevels.parameters=DendrogramSurface_stories_extends({},SelectedLevels.parameters,{docs:DendrogramSurface_stories_extends({},null==(_SelectedLevels$param=SelectedLevels.parameters)?void 0:_SelectedLevels$param.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'selected levels',\n  args: {\n    levels: [1, 2],\n    style: {\n      fill: '#888888',\n      fillOpacity: 0.5,\n      strokeWidth: 1,\n      stroke: '#888888'\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_SelectedLevels$param2=SelectedLevels.parameters)||null==(_SelectedLevels$param3=_SelectedLevels$param2.docs)?void 0:_SelectedLevels$param3.source)})}),Subset.parameters=DendrogramSurface_stories_extends({},Subset.parameters,{docs:DendrogramSurface_stories_extends({},null==(_Subset$parameters=Subset.parameters)?void 0:_Subset$parameters.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'subset',\n  args: {\n    keys: ['gamma', 'epsilon'],\n    style: {\n      fill: '#888888',\n      fillOpacity: 0.5,\n      strokeWidth: 1,\n      stroke: '#888888'\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_Subset$parameters2=Subset.parameters)||null==(_Subset$parameters2$d=_Subset$parameters2.docs)?void 0:_Subset$parameters2$d.source)})}),Expansion.parameters=DendrogramSurface_stories_extends({},Expansion.parameters,{docs:DendrogramSurface_stories_extends({},null==(_Expansion$parameters=Expansion.parameters)?void 0:_Expansion$parameters.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'expansion',\n  args: {\n    levels: [2],\n    expansion: [0.5, 0, 0.5, 0.5],\n    style: {\n      fill: '#888888',\n      fillOpacity: 0.5,\n      strokeWidth: 1,\n      stroke: '#888888'\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_Expansion$parameters2=Expansion.parameters)||null==(_Expansion$parameters3=_Expansion$parameters2.docs)?void 0:_Expansion$parameters3.source)})}),Interactivity.parameters=DendrogramSurface_stories_extends({},Interactivity.parameters,{docs:DendrogramSurface_stories_extends({},null==(_Interactivity$parame=Interactivity.parameters)?void 0:_Interactivity$parame.docs,{source:DendrogramSurface_stories_extends({originalSource:"{\n  name: 'interactive',\n  args: {\n    interactive: true,\n    expansion: [0.5, 0, 0.5, 0.5],\n    style: {\n      fill: '#cccccc',\n      stroke: '#dd0000',\n      strokeWidth: 1,\n      cursor: 'pointer'\n    },\n    handlers: {\n      onClick: (data?: DendrogramInteractiveDataItem) => {\n        console.log(JSON.stringify(data));\n      }\n    }\n  },\n  decorators: [ChartDendrogramSurfaceDecorator]\n}"},null==(_Interactivity$parame2=Interactivity.parameters)||null==(_Interactivity$parame3=_Interactivity$parame2.docs)?void 0:_Interactivity$parame3.source)})});var __namedExportsOrder=["AllLevels","SelectedLevels","Subset","Expansion","Interactivity"]},"./packages/band/src/bars/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>getScaleProps,u:()=>getInternalWidthAndGap});var _chsk_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),getScaleProps=function getScaleProps(ids,data,scaleSpecIndex,scaleSpecValue,size,horizontal,disabled,stacked){void 0===stacked&&(stacked=!1);var result={index:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.BRZ)(scaleSpecIndex),value:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.BRZ)(scaleSpecValue)};if((0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.HBl)(scaleSpecIndex)||(result.index.domain=ids),!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.HBl)(scaleSpecValue)){var filterDisabled=function filterDisabled(v,i){return!disabled[i]},isValue=function isValue(v){return void 0!==v&&isFinite(Number(v))},values=data.map((function(d){return d.filter(filterDisabled).flat().filter(isValue)})),domain=stacked?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.FG_)(values.map((function sumValues(values){var positive=values.reduce((function(acc,v){return isFinite(v)&&v>0?acc+v:acc}),0);return[values.reduce((function(acc,v){return isFinite(v)&&v<0?acc+v:acc}),0),positive]})).flat()):(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.FG_)(values.flat());result.value=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.zAC)(scaleSpecValue,domain)}return result.index.size=horizontal?size[_chsk_core__WEBPACK_IMPORTED_MODULE_0__.Y]:size[_chsk_core__WEBPACK_IMPORTED_MODULE_0__.X],result.value.size=horizontal?size[_chsk_core__WEBPACK_IMPORTED_MODULE_0__.X]:size[_chsk_core__WEBPACK_IMPORTED_MODULE_0__.Y],result},getInternalWidthAndGap=function getInternalWidthAndGap(indexScale,keys,paddingInternal,variant){var bandwidth=indexScale.bandwidth(),nKeys=keys.length,padInternal=paddingInternal||0,width="grouped"===variant?bandwidth/nKeys:bandwidth,advance=width*padInternal;return"grouped"===variant?[width*(1-padInternal),advance/2,advance]:[width*(1-padInternal),advance/2,-width*(1-padInternal)]}},"./packages/band/src/dendrogram/Dendrogram.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>Dendrogram});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),framer_motion__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/framer-motion/dist/es/components/LazyMotion/index.mjs"),framer_motion__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/features-animation.mjs"),_chsk_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),_context__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/band/src/dendrogram/context.tsx"),_bars_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/band/src/bars/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["container","variant","data","scaleIndex","scaleValue","hang","children"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var Dendrogram=function Dendrogram(_ref){var _ref$container=_ref.container,container=void 0===_ref$container?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.WdC:_ref$container,_ref$variant=_ref.variant,variant=void 0===_ref$variant?"bottom":_ref$variant,data=_ref.data,_ref$scaleIndex=_ref.scaleIndex,scaleIndex=void 0===_ref$scaleIndex?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Us:_ref$scaleIndex,_ref$scaleValue=_ref.scaleValue,scaleValue=void 0===_ref$scaleValue?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Bs3:_ref$scaleValue,_ref$hang=_ref.hang,hang=void 0===_ref$hang?-1:_ref$hang,children=_ref.children,props=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(_ref,_excluded),_useContainer=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.uK4)(container),dimsProps=_useContainer.dimsProps,origin=_useContainer.origin,innerSize=_useContainer.innerSize,seriesIndexes=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.snp)(data)}),[data]),horizontal="right"===variant||"left"===variant,processedData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function processData(data,hang){return data.map((function(item,index){var minmax=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(item.height);return{id:item.id,index,domain:hang<0?[0,minmax[1]]:[minmax[0]-hang,minmax[1]]}}))}(data,hang)}),[data,hang]),keys=data[0].keys,_useMemo=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_bars_utils__WEBPACK_IMPORTED_MODULE_3__.P)(keys,data.map((function(d){return d.keys.map((function(){return processedData[0].domain}))})),scaleIndex,scaleValue,innerSize,horizontal,Array(keys.length).fill(!1),!1)}),[processedData,scaleIndex,scaleValue,innerSize,horizontal]),indexProps=_useMemo.index,valueProps=_useMemo.value,xProps=horizontal?valueProps:indexProps,yProps=horizontal?indexProps:valueProps;valueProps.reverse="top"===variant||"right"===variant;var scalesContextValue=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.cT_)({x:xProps,y:yProps}),scales=scalesContextValue.scales,indexScale=horizontal?scales.y:scales.x,valueScale=horizontal?scales.x:scales.y,preparedData=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function prepareData(data,indexScale,valueScale,hang){var abs=Math.abs;return data.map((function(item,index){var nNodes=item.merge.length,position=Array(nNodes).fill(0),height=Array(nNodes).fill(0),leafPosition=item.keys.map(indexScale),leafHeight=Array(item.keys.length).fill(valueScale(0)),positionInterval=[],heightInterval=[];return item.merge.map((function(pair,i){var h=item.height[i];height[i]=valueScale(h);var positionExtremities=[0,0],heightExtremities=[0,0,height[i]],a=pair[0],b=pair[1];a<0&&hang>=0&&(leafHeight[abs(a)-1]=valueScale(h-hang)),b<0&&hang>=0&&(leafHeight[abs(b)-1]=valueScale(h-hang)),heightExtremities[0]=a<0?leafHeight[abs(a)-1]:heightInterval[a-1][0],heightExtremities[1]=b<0?leafHeight[abs(b)-1]:heightInterval[b-1][1],positionExtremities[0]=a<0?leafPosition[abs(a)-1]:position[a-1],positionExtremities[1]=b<0?leafPosition[abs(b)-1]:position[b-1],position[i]=.5*(positionExtremities[0]+positionExtremities[1]),a>0&&positionExtremities.push(positionInterval[a-1]),b>0&&positionExtremities.push(positionInterval[b-1]),positionInterval[i]=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(positionExtremities.flat()),heightInterval[i]=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.FG_)(heightExtremities)})),{id:item.id,index,merge:item.merge,position,height,leafPosition,leafHeight,positionInterval,heightInterval}}))}(data,indexScale,valueScale,hang)}),[data,indexScale,valueScale,hang]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_2__.PzT,_extends({variant:"dendrogram",position:origin,size:dimsProps.size,padding:dimsProps.padding,originalData:data,processedData,seriesIndexes,keys,scalesContextValue},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_context__WEBPACK_IMPORTED_MODULE_4__.It,{data:preparedData,seriesIndexes,keys,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_6__.H,children})})}))};Dendrogram.displayName="Dendrogram";try{Dendrogram.displayName="Dendrogram",Dendrogram.__docgenInfo={description:"",displayName:"Dendrogram",props:{variant:{defaultValue:{value:"bottom"},description:"variant",name:"variant",required:!1,type:{name:"enum",value:[{value:'"bottom"'},{value:'"left"'},{value:'"right"'},{value:'"top"'}]}},data:{defaultValue:null,description:"data",name:"data",required:!0,type:{name:"DendrogramDataItem[]"}},scaleValue:{defaultValue:null,description:"scale for axis with continuous values",name:"scaleValue",required:!1,type:{name:"LinearScaleSpec"}},hang:{defaultValue:{value:"-1"},description:"hang size for leaf nodes",name:"hang",required:!1,type:{name:"number"}},setRole:{defaultValue:null,description:"toggle role attribute in svg code",name:"setRole",required:!1,type:{name:"boolean"}},className:{defaultValue:null,description:"class string",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"css style",name:"style",required:!1,type:{name:"Partial<CSSProperties>"}},children:{defaultValue:null,description:"children",name:"children",required:!1,type:{name:"ReactNode"}},horizontal:{defaultValue:null,description:"display bands horizontally",name:"horizontal",required:!1,type:{name:"boolean"}},container:{defaultValue:null,description:"position and size for bounding container",name:"container",required:!1,type:{name:"ContainerProps"}},scaleColor:{defaultValue:null,description:"scale for colors",name:"scaleColor",required:!1,type:{name:"CategoricalScaleSpec"}},scaleIndex:{defaultValue:null,description:"scale for axis with discrete indexes",name:"scaleIndex",required:!1,type:{name:"ScaleWithBandwidthSpec"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/src/dendrogram/Dendrogram.tsx#Dendrogram"]={docgenInfo:Dendrogram.__docgenInfo,name:"Dendrogram",path:"packages/band/src/dendrogram/Dendrogram.tsx#Dendrogram"})}catch(__react_docgen_typescript_loader_error){}},"./packages/band/src/dendrogram/DendrogramTree.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DendrogramTree});var _chsk_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),_context__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/band/src/dendrogram/context.tsx"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_predicates__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/band/src/dendrogram/predicates.ts"),_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./packages/band/src/dendrogram/utils.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _extends(){return _extends=Object.assign?Object.assign.bind():function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_extends.apply(this,arguments)}var nodePoint=function nodePoint(data,index,horizontal){var positions=index<0?data.leafPosition:data.position,heights=index<0?data.leafHeight:data.height,result=[positions[Math.abs(index)-1],heights[Math.abs(index)-1]];return horizontal?result.reverse():result},DendrogramTree=function DendrogramTree(_ref){var levels=_ref.levels,ids=_ref.ids,keys=_ref.keys,_ref$component=_ref.component,component=void 0===_ref$component?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.y$t:_ref$component,componentProps=_ref.componentProps,_ref$dataComponent=_ref.dataComponent,dataComponent=void 0===_ref$dataComponent?_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Aj5:_ref$dataComponent,handlers=_ref.handlers,modifiers=_ref.modifiers,className=_ref.className,style=_ref.style,_ref$setRole=_ref.setRole,setRole=void 0===_ref$setRole||_ref$setRole,originalData=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.W3B)().data,preparedData=(0,_context__WEBPACK_IMPORTED_MODULE_3__._$)(),scales=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.kE1)().scales,_useIdsKeys=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.lRm)(ids,keys,preparedData),idSet=_useIdsKeys.idSet,keyArray=_useIdsKeys.keyArray,horizontal=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_2__.y7R)(scales.y),indexScale=horizontal?scales.y:scales.x;if(!(0,_predicates__WEBPACK_IMPORTED_MODULE_4__.T)(originalData))return null;var commonProps=_extends({variant:"dendrogram",setRole:!1},componentProps,{style,className}),result=preparedData.data.map((function(seriesData){var id=seriesData.id;if(!idSet.has(id))return null;var lines=(0,_utils__WEBPACK_IMPORTED_MODULE_5__.y)(seriesData,indexScale,levels,void 0===keys?keys:keyArray,!0).map((function(level){var pair=seriesData.merge[level],points=function createTreeConnectionPoints(data,midIndex,startIndex,endIndex,horizontal){var result=Array(4);result[0]=nodePoint(data,startIndex,horizontal),result[3]=nodePoint(data,endIndex,horizontal);var mid=nodePoint(data,midIndex,horizontal);return horizontal?(result[1]=[mid[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],result[0][_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]],result[2]=[mid[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],result[3][_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]]):(result[1]=[result[0][_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],mid[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]],result[2]=[result[3][_chsk_core__WEBPACK_IMPORTED_MODULE_2__.X],mid[_chsk_core__WEBPACK_IMPORTED_MODULE_2__.Y]]),result}(seriesData,level+1,pair[0],pair[1],horizontal);return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(dataComponent,{key:"t-"+seriesData.index+"-"+level,data:{id,level,data:originalData[seriesData.index]},component,props:_extends({},commonProps,{points}),handlers,modifiers})}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("g",{role:setRole?"dendrogram-tree":void 0,children:lines},"t-"+seriesData.index)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:result.filter(Boolean)})};try{DendrogramTree.displayName="DendrogramTree",DendrogramTree.__docgenInfo={description:"",displayName:"DendrogramTree",props:{levels:{defaultValue:null,description:"hierarchy levels",name:"levels",required:!1,type:{name:"number[]"}},ids:{defaultValue:null,description:"ids to display (defaults to all ids)",name:"ids",required:!1,type:{name:"string[]"}},keys:{defaultValue:null,description:"keys to display (default to all keys)",name:"keys",required:!1,type:{name:"string[]"}},className:{defaultValue:null,description:"class string",name:"className",required:!1,type:{name:"string"}},style:{defaultValue:null,description:"css style",name:"style",required:!1,type:{name:"Partial<CSSProperties>"}},setRole:{defaultValue:{value:"true"},description:"toggle role attribute in svg code",name:"setRole",required:!1,type:{name:"boolean"}},handlers:{defaultValue:null,description:"handlers for events",name:"handlers",required:!1,type:{name:"DataInteractivityHandlers<DendrogramInteractiveDataItem>"}},modifiers:{defaultValue:null,description:"style modifiers",name:"modifiers",required:!1,type:{name:"DataInteractivityModifiers"}},dataComponent:{defaultValue:null,description:"function binding data to interactivity handlers",name:"dataComponent",required:!1,type:{name:"FC<DataComponentProps<DendrogramInteractiveDataItem, PathProps>>"}},component:{defaultValue:null,description:"function used to draw individual components",name:"component",required:!1,type:{name:"FC<PathProps>"}},componentProps:{defaultValue:null,description:"props passed to each component",name:"componentProps",required:!1,type:{name:"Partial<PathProps>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/src/dendrogram/DendrogramTree.tsx#DendrogramTree"]={docgenInfo:DendrogramTree.__docgenInfo,name:"DendrogramTree",path:"packages/band/src/dendrogram/DendrogramTree.tsx#DendrogramTree"})}catch(__react_docgen_typescript_loader_error){}},"./packages/band/src/dendrogram/context.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{It:()=>DendrogramPreparedDataProvider,_$:()=>useDendrogramPreparedData});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),DendrogramPreparedDataContext=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({data:[],seriesIndexes:{},keys:[]}),DendrogramPreparedDataProvider=function DendrogramPreparedDataProvider(_ref){var data=_ref.data,seriesIndexes=_ref.seriesIndexes,keys=_ref.keys,children=_ref.children,value=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return{data,seriesIndexes,keys}}),[data]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(DendrogramPreparedDataContext.Provider,{value,children})};DendrogramPreparedDataProvider.displayName="DendrogramPreparedDataProvider";var useDendrogramPreparedData=function useDendrogramPreparedData(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(DendrogramPreparedDataContext)};try{DendrogramPreparedDataProvider.displayName="DendrogramPreparedDataProvider",DendrogramPreparedDataProvider.__docgenInfo={description:"",displayName:"DendrogramPreparedDataProvider",props:{keys:{defaultValue:null,description:"list of keys",name:"keys",required:!0,type:{name:"string[]"}},seriesIndexes:{defaultValue:null,description:"map from series ids to indexes",name:"seriesIndexes",required:!0,type:{name:"Record<string, number>"}},data:{defaultValue:null,description:"data",name:"data",required:!0,type:{name:"DendrogramPreparedDataItem[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/src/dendrogram/context.tsx#DendrogramPreparedDataProvider"]={docgenInfo:DendrogramPreparedDataProvider.__docgenInfo,name:"DendrogramPreparedDataProvider",path:"packages/band/src/dendrogram/context.tsx#DendrogramPreparedDataProvider"})}catch(__react_docgen_typescript_loader_error){}},"./packages/band/src/dendrogram/predicates.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>isDendrogramData});var _chsk_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),isDendrogramData=function isDendrogramData(data){var result=data.map((function(item){if("object"!=typeof item||null===item)return!1;if("id"in item&&"keys"in item&&"height"in item&&"merge"in item){var merge=item.merge,height=item.height;return!(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.kJL)(height)||!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.kJL)(merge))&&height.length===merge.length}return!1}));return result.length>0&&result.every(Boolean)}},"./packages/band/src/dendrogram/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>getTargetLevels});var _chsk_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),getSubTree=function getSubTree(data,level,result){result.push(level);var pair=data.merge[level];pair[0]>0&&getSubTree(data,pair[0]-1,result),pair[1]>0&&getSubTree(data,pair[1]-1,result)},getTargetLevels=function getTargetLevels(item,indexScale,levels,keys,subTree){void 0===subTree&&(subTree=!1);var result=[];if(void 0===keys&&void 0===levels?result=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_0__.w6H)(item.merge.length):void 0!==levels&&(result=result.concat(levels)),void 0!==keys){var commonLevel=function getCommonLevel(data,indexScale,keys){for(var positions=keys.map((function(k){return indexScale(k)})),lastLevel=data.positionInterval.length-1,_loop=function _loop(){var interval=data.positionInterval[i];if(positions.every((function(v){return v>=interval[0]&&v<=interval[1]})))return{v:i}},i=0;i<lastLevel;i++){var _ret=_loop();if("object"==typeof _ret)return _ret.v}return lastLevel}(item,indexScale,keys);if(subTree){var commonTree=[];getSubTree(item,commonLevel,commonTree),result=result.concat(commonTree)}else result.push(commonLevel)}return result.sort((function(a,b){return b-a})),result}},"./packages/band/stories/dendrogram/decorators.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Gd:()=>ChartDendrogramDecorator,LL:()=>ChartDendrogramSurfaceDecorator,jS:()=>commonDendrogramProps,ms:()=>ChartDendrogramTreeHangDecorator,pW:()=>ChartDendrogramTreeDecorator});var _chsk_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),_src__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./packages/band/src/dendrogram/Dendrogram.tsx"),_src__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/band/src/dendrogram/DendrogramTree.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),dataHierarchy=[{id:"data",merge:[[-1,-2],[-4,-5],[-3,2],[1,3]],height:[.25,.5,.75,1],keys:["alpha","beta","gamma","delta","epsilon"]}],commonDendrogramProps={data:dataHierarchy},ChartWithLegendDecorator=function ChartWithLegendDecorator(Story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.kL2,{size:[400,300],padding:[40,40,60,60],style:{display:"inline-block"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.Tgp,{variant:"inner"}),Story()]})};ChartWithLegendDecorator.displayName="ChartWithLegendDecorator";var ChartDendrogramDecorator=function ChartDendrogramDecorator(Story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.kL2,{size:[400,300],padding:[40,40,60,60],style:{display:"inline-block"},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_src__WEBPACK_IMPORTED_MODULE_2__.b,{data:dataHierarchy,variant:"bottom",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.Tgp,{variant:"inner"}),Story()]})})};ChartDendrogramDecorator.displayName="ChartDendrogramDecorator";var customTheme={rect:{leafLabel:{fillOpacity:0,stroke:"#000000",strokeWidth:1}}},ChartDendrogramTreeDecorator=function ChartDendrogramTreeDecorator(Story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.kL2,{size:[400,300],padding:[40,60,40,40],style:{display:"inline-block"},theme:customTheme,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_src__WEBPACK_IMPORTED_MODULE_2__.b,{data:dataHierarchy,variant:"right",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.Tgp,{variant:"inner"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_3__.A,{}),Story()]})})};ChartDendrogramTreeDecorator.displayName="ChartDendrogramTreeDecorator";var ChartDendrogramTreeHangDecorator=function ChartDendrogramTreeHangDecorator(Story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.kL2,{size:[400,300],padding:[40,60,40,40],style:{display:"inline-block"},theme:customTheme,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_src__WEBPACK_IMPORTED_MODULE_2__.b,{data:dataHierarchy,variant:"right",hang:.05,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.Tgp,{variant:"inner"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_3__.A,{}),Story()]})})};ChartDendrogramTreeHangDecorator.displayName="ChartDendrogramTreeHangDecorator";var ChartDendrogramSurfaceDecorator=function ChartDendrogramSurfaceDecorator(Story){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.kL2,{size:[400,300],padding:[40,60,40,40],style:{display:"inline-block"},theme:customTheme,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_src__WEBPACK_IMPORTED_MODULE_2__.b,{data:dataHierarchy,variant:"right",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_1__.Tgp,{variant:"inner"}),Story(),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_3__.A,{style:{pointerEvents:"none"}})]})})};ChartDendrogramSurfaceDecorator.displayName="ChartDendrogramSurfaceDecorator";try{ChartWithLegendDecorator.displayName="ChartWithLegendDecorator",ChartWithLegendDecorator.__docgenInfo={description:"",displayName:"ChartWithLegendDecorator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/stories/dendrogram/decorators.tsx#ChartWithLegendDecorator"]={docgenInfo:ChartWithLegendDecorator.__docgenInfo,name:"ChartWithLegendDecorator",path:"packages/band/stories/dendrogram/decorators.tsx#ChartWithLegendDecorator"})}catch(__react_docgen_typescript_loader_error){}try{ChartDendrogramDecorator.displayName="ChartDendrogramDecorator",ChartDendrogramDecorator.__docgenInfo={description:"",displayName:"ChartDendrogramDecorator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/stories/dendrogram/decorators.tsx#ChartDendrogramDecorator"]={docgenInfo:ChartDendrogramDecorator.__docgenInfo,name:"ChartDendrogramDecorator",path:"packages/band/stories/dendrogram/decorators.tsx#ChartDendrogramDecorator"})}catch(__react_docgen_typescript_loader_error){}try{ChartDendrogramTreeDecorator.displayName="ChartDendrogramTreeDecorator",ChartDendrogramTreeDecorator.__docgenInfo={description:"",displayName:"ChartDendrogramTreeDecorator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/stories/dendrogram/decorators.tsx#ChartDendrogramTreeDecorator"]={docgenInfo:ChartDendrogramTreeDecorator.__docgenInfo,name:"ChartDendrogramTreeDecorator",path:"packages/band/stories/dendrogram/decorators.tsx#ChartDendrogramTreeDecorator"})}catch(__react_docgen_typescript_loader_error){}try{ChartDendrogramTreeHangDecorator.displayName="ChartDendrogramTreeHangDecorator",ChartDendrogramTreeHangDecorator.__docgenInfo={description:"",displayName:"ChartDendrogramTreeHangDecorator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/stories/dendrogram/decorators.tsx#ChartDendrogramTreeHangDecorator"]={docgenInfo:ChartDendrogramTreeHangDecorator.__docgenInfo,name:"ChartDendrogramTreeHangDecorator",path:"packages/band/stories/dendrogram/decorators.tsx#ChartDendrogramTreeHangDecorator"})}catch(__react_docgen_typescript_loader_error){}try{ChartDendrogramSurfaceDecorator.displayName="ChartDendrogramSurfaceDecorator",ChartDendrogramSurfaceDecorator.__docgenInfo={description:"",displayName:"ChartDendrogramSurfaceDecorator",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["packages/band/stories/dendrogram/decorators.tsx#ChartDendrogramSurfaceDecorator"]={docgenInfo:ChartDendrogramSurfaceDecorator.__docgenInfo,name:"ChartDendrogramSurfaceDecorator",path:"packages/band/stories/dendrogram/decorators.tsx#ChartDendrogramSurfaceDecorator"})}catch(__react_docgen_typescript_loader_error){}},"./packages/band/stories/dendrogram/DendrogramSurface.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_storybook_addon_essentials_docs_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/blocks/dist/index.mjs"),_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/band/stories/dendrogram/DendrogramSurface.stories.tsx");function _createMdxContent(props){const _components=Object.assign({h1:"h1",p:"p",code:"code",h2:"h2"},(0,_storybook_addon_essentials_docs_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__.ah)(),props.components);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h1,{id:"dendrogramsurface",children:"DendrogramSurface"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.h_,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"DendrogramSurface"})," draws rectangles around dendrogram branches."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Ed,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"data-subsets",children:"Data subsets"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["By default ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"DendrogramSurface"})," draws a series of rectangles, each capturing a layer of the dendrogram hierarchy."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.AllLevels}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Prop ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"levels"})," accepts an array of integers that denote specific parts of the dendrogram.\nIntegers are interpreted as indexes in the ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"merge"})," field in the original data."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.SelectedLevels}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Prop ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"ids"})," uses a list of leaf identifiers to creates a surface around the branch that encompasses those leaves."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.Subset}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["A distinction between ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"levels"})," and ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"ids"})," is that an array of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"ids"})," always creates only a single surface.\nIn contrast, an array of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"levels"})," draws multiple surfaces."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"expansion",children:"Expansion"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Prop ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"expansion"})," enlarges the surface around a branch."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.Expansion}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.h2,{id:"interactivity",children:"Interactivity"}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Prop ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"interactive"})," toggles interactivity, which makes surfaces become visible only upon mouse interactions."]}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_storybook_blocks__WEBPACK_IMPORTED_MODULE_3__.Xz,{of:_DendrogramSurface_stories__WEBPACK_IMPORTED_MODULE_4__.Interactivity}),"\n",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_components.p,{children:["Note that if ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"DendrogramTree"})," (or any other component) is layered on top of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"DendrogramSurface"}),",\nit may be desirable to turn off pointer events on the top layer.\nThis is achieved by including ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_components.code,{children:"pointerEvents: 'none'"})," in the top layer's style."]})]})}const __WEBPACK_DEFAULT_EXPORT__=function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,_storybook_addon_essentials_docs_mdx_react_shim__WEBPACK_IMPORTED_MODULE_2__.ah)(),props.components);return MDXLayout?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(MDXLayout,Object.assign({},props,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_createMdxContent,props)})):_createMdxContent(props)}},"./node_modules/d3-shape/src/area.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var _array_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/d3-shape/src/array.js"),_constant_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/d3-shape/src/constant.js"),_curve_linear_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/d3-shape/src/curve/linear.js"),_line_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/d3-shape/src/line.js"),_path_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/d3-shape/src/path.js"),_point_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/d3-shape/src/point.js");function __WEBPACK_DEFAULT_EXPORT__(x0,y0,y1){var x1=null,defined=(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(!0),context=null,curve=_curve_linear_js__WEBPACK_IMPORTED_MODULE_1__.Z,output=null,path=(0,_path_js__WEBPACK_IMPORTED_MODULE_2__.d)(area);function area(data){var i,j,k,d,buffer,n=(data=(0,_array_js__WEBPACK_IMPORTED_MODULE_4__.Z)(data)).length,defined0=!1,x0z=new Array(n),y0z=new Array(n);for(null==context&&(output=curve(buffer=path())),i=0;i<=n;++i){if(!(i<n&&defined(d=data[i],i,data))===defined0)if(defined0=!defined0)j=i,output.areaStart(),output.lineStart();else{for(output.lineEnd(),output.lineStart(),k=i-1;k>=j;--k)output.point(x0z[k],y0z[k]);output.lineEnd(),output.areaEnd()}defined0&&(x0z[i]=+x0(d,i,data),y0z[i]=+y0(d,i,data),output.point(x1?+x1(d,i,data):x0z[i],y1?+y1(d,i,data):y0z[i]))}if(buffer)return output=null,buffer+""||null}function arealine(){return(0,_line_js__WEBPACK_IMPORTED_MODULE_5__.Z)().defined(defined).curve(curve).context(context)}return x0="function"==typeof x0?x0:void 0===x0?_point_js__WEBPACK_IMPORTED_MODULE_3__.x:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+x0),y0="function"==typeof y0?y0:void 0===y0?(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(0):(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+y0),y1="function"==typeof y1?y1:void 0===y1?_point_js__WEBPACK_IMPORTED_MODULE_3__.y:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+y1),area.x=function(_){return arguments.length?(x0="function"==typeof _?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+_),x1=null,area):x0},area.x0=function(_){return arguments.length?(x0="function"==typeof _?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+_),area):x0},area.x1=function(_){return arguments.length?(x1=null==_?null:"function"==typeof _?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+_),area):x1},area.y=function(_){return arguments.length?(y0="function"==typeof _?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+_),y1=null,area):y0},area.y0=function(_){return arguments.length?(y0="function"==typeof _?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+_),area):y0},area.y1=function(_){return arguments.length?(y1=null==_?null:"function"==typeof _?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(+_),area):y1},area.lineX0=area.lineY0=function(){return arealine().x(x0).y(y0)},area.lineY1=function(){return arealine().x(x0).y(y1)},area.lineX1=function(){return arealine().x(x1).y(y0)},area.defined=function(_){return arguments.length?(defined="function"==typeof _?_:(0,_constant_js__WEBPACK_IMPORTED_MODULE_0__.Z)(!!_),area):defined},area.curve=function(_){return arguments.length?(curve=_,null!=context&&(output=curve(context)),area):curve},area.context=function(_){return arguments.length?(null==_?context=output=null:output=curve(context=_),area):context},area}},"./node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>AnimatePresence});var react=__webpack_require__("./node_modules/react/index.js"),frameloop=__webpack_require__("./node_modules/framer-motion/dist/es/frameloop/index.mjs"),use_isomorphic_effect=__webpack_require__("./node_modules/framer-motion/dist/es/utils/use-isomorphic-effect.mjs");function useIsMounted(){const isMounted=(0,react.useRef)(!1);return(0,use_isomorphic_effect.L)((()=>(isMounted.current=!0,()=>{isMounted.current=!1})),[]),isMounted}var PresenceContext=__webpack_require__("./node_modules/framer-motion/dist/es/context/PresenceContext.mjs"),use_constant=__webpack_require__("./node_modules/framer-motion/dist/es/utils/use-constant.mjs");class PopChildMeasure extends react.Component{getSnapshotBeforeUpdate(prevProps){const element=this.props.childRef.current;if(element&&prevProps.isPresent&&!this.props.isPresent){const size=this.props.sizeRef.current;size.height=element.offsetHeight||0,size.width=element.offsetWidth||0,size.top=element.offsetTop,size.left=element.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children,isPresent}){const id=(0,react.useId)(),ref=(0,react.useRef)(null),size=(0,react.useRef)({width:0,height:0,top:0,left:0});return(0,react.useInsertionEffect)((()=>{const{width,height,top,left}=size.current;if(isPresent||!ref.current||!width||!height)return;ref.current.dataset.motionPopId=id;const style=document.createElement("style");return document.head.appendChild(style),style.sheet&&style.sheet.insertRule(`\n          [data-motion-pop-id="${id}"] {\n            position: absolute !important;\n            width: ${width}px !important;\n            height: ${height}px !important;\n            top: ${top}px !important;\n            left: ${left}px !important;\n          }\n        `),()=>{document.head.removeChild(style)}}),[isPresent]),react.createElement(PopChildMeasure,{isPresent,childRef:ref,sizeRef:size},react.cloneElement(children,{ref}))}const PresenceChild=({children,initial,isPresent,onExitComplete,custom,presenceAffectsLayout,mode})=>{const presenceChildren=(0,use_constant.h)(newChildrenMap),id=(0,react.useId)(),context=(0,react.useMemo)((()=>({id,initial,isPresent,custom,onExitComplete:childId=>{presenceChildren.set(childId,!0);for(const isComplete of presenceChildren.values())if(!isComplete)return;onExitComplete&&onExitComplete()},register:childId=>(presenceChildren.set(childId,!1),()=>presenceChildren.delete(childId))})),presenceAffectsLayout?void 0:[isPresent]);return(0,react.useMemo)((()=>{presenceChildren.forEach(((_,key)=>presenceChildren.set(key,!1)))}),[isPresent]),react.useEffect((()=>{!isPresent&&!presenceChildren.size&&onExitComplete&&onExitComplete()}),[isPresent]),"popLayout"===mode&&(children=react.createElement(PopChild,{isPresent},children)),react.createElement(PresenceContext.O.Provider,{value:context},children)};function newChildrenMap(){return new Map}var LayoutGroupContext=__webpack_require__("./node_modules/framer-motion/dist/es/context/LayoutGroupContext.mjs");var errors=__webpack_require__("./node_modules/framer-motion/dist/es/utils/errors.mjs");const getChildKey=child=>child.key||"";const AnimatePresence=({children,custom,initial=!0,onExitComplete,exitBeforeEnter,presenceAffectsLayout=!0,mode="sync"})=>{(0,errors.k)(!exitBeforeEnter,"Replace exitBeforeEnter with mode='wait'");const forceRender=(0,react.useContext)(LayoutGroupContext.p).forceRender||function useForceUpdate(){const isMounted=useIsMounted(),[forcedRenderCount,setForcedRenderCount]=(0,react.useState)(0),forceRender=(0,react.useCallback)((()=>{isMounted.current&&setForcedRenderCount(forcedRenderCount+1)}),[forcedRenderCount]);return[(0,react.useCallback)((()=>frameloop.Wi.postRender(forceRender)),[forceRender]),forcedRenderCount]}()[0],isMounted=useIsMounted(),filteredChildren=function onlyElements(children){const filtered=[];return react.Children.forEach(children,(child=>{(0,react.isValidElement)(child)&&filtered.push(child)})),filtered}(children);let childrenToRender=filteredChildren;const exitingChildren=(0,react.useRef)(new Map).current,presentChildren=(0,react.useRef)(childrenToRender),allChildren=(0,react.useRef)(new Map).current,isInitialRender=(0,react.useRef)(!0);if((0,use_isomorphic_effect.L)((()=>{isInitialRender.current=!1,function updateChildLookup(children,allChildren){children.forEach((child=>{const key=getChildKey(child);allChildren.set(key,child)}))}(filteredChildren,allChildren),presentChildren.current=childrenToRender})),function useUnmountEffect(callback){return(0,react.useEffect)((()=>()=>callback()),[])}((()=>{isInitialRender.current=!0,allChildren.clear(),exitingChildren.clear()})),isInitialRender.current)return react.createElement(react.Fragment,null,childrenToRender.map((child=>react.createElement(PresenceChild,{key:getChildKey(child),isPresent:!0,initial:!!initial&&void 0,presenceAffectsLayout,mode},child))));childrenToRender=[...childrenToRender];const presentKeys=presentChildren.current.map(getChildKey),targetKeys=filteredChildren.map(getChildKey),numPresent=presentKeys.length;for(let i=0;i<numPresent;i++){const key=presentKeys[i];-1!==targetKeys.indexOf(key)||exitingChildren.has(key)||exitingChildren.set(key,void 0)}return"wait"===mode&&exitingChildren.size&&(childrenToRender=[]),exitingChildren.forEach(((component,key)=>{if(-1!==targetKeys.indexOf(key))return;const child=allChildren.get(key);if(!child)return;const insertionIndex=presentKeys.indexOf(key);let exitingComponent=component;if(!exitingComponent){const onExit=()=>{allChildren.delete(key),exitingChildren.delete(key);const removeIndex=presentChildren.current.findIndex((presentChild=>presentChild.key===key));if(presentChildren.current.splice(removeIndex,1),!exitingChildren.size){if(presentChildren.current=filteredChildren,!1===isMounted.current)return;forceRender(),onExitComplete&&onExitComplete()}};exitingComponent=react.createElement(PresenceChild,{key:getChildKey(child),isPresent:!1,onExitComplete:onExit,custom,presenceAffectsLayout,mode},child),exitingChildren.set(key,exitingComponent)}childrenToRender.splice(insertionIndex,0,exitingComponent)})),childrenToRender=childrenToRender.map((child=>{const key=child.key;return exitingChildren.has(key)?child:react.createElement(PresenceChild,{key:getChildKey(child),isPresent:!0,presenceAffectsLayout,mode},child)})),react.createElement(react.Fragment,null,exitingChildren.size?childrenToRender:childrenToRender.map((child=>(0,react.cloneElement)(child))))}}}]);