"use strict";(self.webpackChunkchsk=self.webpackChunkchsk||[]).push([[7669],{"./packages/xy/dist/chsk-xy.es.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bf:()=>isScatterData,DP:()=>useScatterPreparedData,Ew:()=>ScatterErrors,FX:()=>Regression,LY:()=>HistogramCurve,ST:()=>ScatterLabel,V2:()=>ScatterInterval,XG:()=>ScatterCrosshair,b5:()=>Histogram,bp:()=>Scatter,cG:()=>ScatterPoints,dA:()=>HistogramArea,dI:()=>isScatterProcessedData,nC:()=>ScatterSeries,nr:()=>ScatterCurve,pP:()=>HistogramBars,tA:()=>isHistogramData});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),framer_motion__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/framer-motion/dist/es/components/LazyMotion/index.mjs"),framer_motion__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/features-animation.mjs"),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/lodash.js"),_chsk_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/core/dist/chsk-core.es.js"),ie=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({data:[],seriesIndexes:{},keys:[]}),HistogramPreparedDataProvider=function HistogramPreparedDataProvider(e){var r=e.data,t=e.seriesIndexes,o=e.keys,a=e.children,i=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return{data:r,seriesIndexes:t,keys:o}}),[r]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ie.Provider,{value:i,children:a})},useHistogramPreparedData=function useHistogramPreparedData(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(ie)},isHistogramProcessedData=function isHistogramProcessedData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"index"in e&&"points"in e})).every(Boolean)},isHistogramData=function isHistogramData(e){return e.map((function(e){return"id"in e&&"data"in e&&Array.isArray(e.data)})).every(Boolean)};function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}var formatBinnedData=function formatBinnedData(e,n){var r=n.length,t=Array(r+1).fill([0,0]);return t[0]=[n[0],e[0]],t[r]=[n[r-1],e[r-2]],e.forEach((function(e,r){t[r+1]=[(n[r+1]+n[r])/2,e]})),t},binValues=function binValues(e,n,r){var t=Array(n.length-1).fill(0);if(0===e.length)return formatBinnedData(t,n);var o=n[0],a=n[n.length-1];if(e.filter((function(e){return e>=o&&e<a})).forEach((function(e){var r=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.sortedIndex)(n,e);t[r-1]+=1})),r){var i=t.reduce((function(e,n){return e+n}),0);t.forEach((function(e,r){var o=n[r+1]-n[r];t[r]=e/(o*i)}))}return formatBinnedData(t,n)},se=["variant","container","data","breaks","scaleX","scaleY","scaleColor","autoRescale","children"],Histogram=function Histogram(e){var r=e.variant,t=void 0===r?"count":r,o=e.container,a=void 0===o?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Wd:o,i=e.data,l=e.breaks,u=e.scaleX,v=void 0===u?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Bs:u,p=e.scaleY,j=void 0===p?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Bs:p,P=e.scaleColor,L=e.autoRescale,W=void 0===L||L,B=e.children,O=_objectWithoutPropertiesLoose(e,se),D=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Fg)(),F=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.uK)(a),A=F.dimsProps,K=F.origin,E=F.innerSize,X=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.sn)(i)}),[i]),Y=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return i.map((function(e){return e.id}))}),[i]),q=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(Y).disabled,V=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return Array.isArray(l)?l:function(e,n){var r=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(e.map((function(e){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(e.data)})).flat()),t=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Pu)({variant:"linear",size:100,domain:r}).ticks(Math.max(2,n)),o=t[1]-t[0],a=t[t.length-1];return a<r[1]&&t.push(a+o),t[0]>r[0]&&(t=[t[0]-o].concat(t)),t}(i,l)}),[i,l]),G=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n,r){return e.map((function(e,t){var o=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Gq)(e.data),a=o[0],i=o[1];return{id:e.id,index:t,points:binValues(e.data,n,r),breaks:n,n:e.data.length,mean:a,sd:Math.sqrt(i)}}))}(i,V,"density"===t)}),[i,V,t]),H=function(e,n,r,t,o){var a={x:(0,lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(n),y:(0,lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(r)},filterDisabled=function filterDisabled(e,n){return!o[n]};if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.HB)(n)){var i=e.filter(filterDisabled).map((function(e){return e.points.map((function(e){return e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]}))})).flat();a.x=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.zA)(n,(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(i))}if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.HB)(r)){var s=e.filter(filterDisabled).map((function(e){return e.points.map((function(e){return e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]}))})).flat();a.y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.zA)(r,(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(s))}return a.x.size=t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],a.y.size=t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],a}(G,v,j,E,W?q:Array(Y.length).fill(!1)),J=H.x,Q=H.y,T=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.NV)(null!=P?P:D.Colors.categorical,Y),U=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.cT)({x:J,y:Q,color:T}),Z=U.scales,$=G.map((function(e){return function(e,n,r){return{id:e.id,index:e.index,points:e.points.map((function(e){return[n(e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]),r(e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y])]})),breaks:e.breaks,n:e.n}}(e,Z.x,Z.y)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Pz,_extends({variant:"histogram",position:K,size:A.size,padding:A.padding,originalData:i,processedData:G,seriesIndexes:X,keys:Y,scalesContextValue:U},O,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(HistogramPreparedDataProvider,{data:$,seriesIndexes:X,keys:Y,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_5__.H,children:B})})}))},le=(0,react__WEBPACK_IMPORTED_MODULE_0__.createContext)({data:[],seriesIndexes:{},keys:[]}),ScatterPreparedDataProvider=function ScatterPreparedDataProvider(e){var r=e.data,t=e.seriesIndexes,o=e.keys,a=e.children,i=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return{data:r,seriesIndexes:t,keys:o}}),[r,t,o]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(le.Provider,{value:i,children:a})},useScatterPreparedData=function useScatterPreparedData(){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(le)},downsample=function downsample(e,n,r){void 0===r&&(r=0);var t=e.length,o=e.map((function(e,r){return Math.floor(r*n)}));return o.map((function(e,n){return n+r<t&&(0===n||e!=o[n-1])?n:void 0})).filter((function(e){return void 0!==e})).map((function(n){return e[n+r]}))},curvePoints=function curvePoints(e){var n=e.x,r=e.y,t=e.convolutionMask,o=e.convolutionOffset,a=void 0===o?0:o,i=e.downsampleFactor,s=void 0===i?1:i,l=e.downsampleIndex,u=void 0===l?0:l,d=t?t.length-1:0,c=n.slice(d+a,n.length+a),v=(t?function convolution(e,n,r){void 0===r&&(r=!0);for(var t,o,a=r?(o=(t=n).reduce((function(e,n){return e+n}),0),t.map((function(e){return e/o}))):[].concat(n),i=a.length,s=e.length+a.length-1,l=Array(s).fill(0),u=0;u<s;u+=1){for(var d=0,c=0;c<i;c++){var v;d+=(null!=(v=e[u-c])?v:0)*a[c]}l[u]=d}return l}(r,t):r).slice(d,n.length),f=1===s,p=f?c:downsample(c,s,u),m=f?v:downsample(v,s,u);return p.map((function(e,n){return[e,m[n]]}))},ue=["ids","baseline","curve","convolutionMask","convolutionOffset","downsampleFactor","downsampleIndex","style","className","setRole","dataComponent"],getAreaD=function getAreaD(e){var n,r=e.points,t=e.scaleY,o=e.baseline,a=e.curve,i=t(null!=o?o:t.domain()[0]),s=r.map((function(e){return[e[0],e[1],i]}));return null!=(n=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Dm)(a)(s))?n:""},ScatterArea=function ScatterArea(e){var r=e.ids,o=e.baseline,a=e.curve,i=void 0===a?"Linear":a,u=e.convolutionMask,d=e.convolutionOffset,c=e.downsampleFactor,v=e.downsampleIndex,f=e.style,p=e.className,m=e.setRole,y=void 0===m||m,x=e.dataComponent,h=void 0===x?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:x,b=_objectWithoutPropertiesLoose(e,ue),g=useScatterPreparedData(),N=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales,k=N.y,C=N.color,_=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),w=_.disabledKeys,I=_.firstRender;if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.z0)(k))return null;var z={};g.keys.map((function(e){var r=g.seriesIndexes[e],t=g.data[r];z[e]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return getAreaD({points:curvePoints({x:t.x,y:t.y,convolutionMask:u,convolutionOffset:d,downsampleFactor:c,downsampleIndex:v}),curve:i,scaleY:k,baseline:o})}),[r,g,i,k,o,u,d,c,v])}));var S=(null!=r?r:g.keys).map((function(e){var n=!w.has(e),r=g.seriesIndexes[e];if(void 0===r)return null;var o=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(f,C(r)),a=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(h,_extends({data:{id:e},component:_chsk_core__WEBPACK_IMPORTED_MODULE_3__.y$,props:{variant:"scatter-area",d:z[e],setRole:y,style:o,className:p}},b));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:y?"scatter-area-presence":void 0,visible:n,firstRender:I,children:a},"area-"+r)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:S.filter(Boolean)})},de=["ids","curve","style","setRole","dataComponent"],HistogramArea=function HistogramArea(e){var r=e.ids,o=e.curve,a=void 0===o?"MonotoneX":o,i=e.style,u=e.setRole,d=void 0===u||u,c=e.dataComponent,v=void 0===c?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:c,f=_objectWithoutPropertiesLoose(e,de),p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.pg)().data,m=useHistogramPreparedData(),y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales,x=y.y,h=y.color,b=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),g=b.disabledKeys,N=b.firstRender;if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.z0)(x))return null;if(!isHistogramProcessedData(p))return null;var k={};m.keys.map((function(e){var r=m.seriesIndexes[e];k[e]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return getAreaD({points:m.data[r].points,curve:a,scaleY:x,baseline:0})}),[r,m,a,x])}));var C=(null!=r?r:m.keys).map((function(e){var n=m.seriesIndexes[e];if(void 0===n)return null;var r=!g.has(e),o=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(i,h(n)),a=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(v,_extends({data:p[n],component:_chsk_core__WEBPACK_IMPORTED_MODULE_3__.y$,props:{variant:"histogram-area",d:k[e],setRole:d,style:o}},f));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:d?"histogram-area-presence":void 0,visible:r,firstRender:N,children:a},"area-"+n)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:C.filter(Boolean)})},ce=["ids","component","style","className","setRole","dataComponent"],HistogramBars=function HistogramBars(e){var r=e.ids,o=e.component,a=void 0===o?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Ae:o,i=e.style,u=e.className,d=e.setRole,c=void 0===d||d,v=e.dataComponent,f=void 0===v?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:v,p=_objectWithoutPropertiesLoose(e,ce),m=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.pg)().data,y=useHistogramPreparedData(),x=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales,h=x.y,b=x.color,g=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),N=g.disabledKeys,k=g.firstRender;if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.z0)(h))return null;if(!isHistogramProcessedData(m))return null;var C=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return y.keys.map((function(e,n){var r=b(n);return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(i,r)}))}),[y,i,b]),I=h(0),z=(null!=r?r:y.keys).map((function(e){var n=y.seriesIndexes[e];if(void 0===n)return null;var r=!N.has(e),o=y.data[n].points,i=o.length,l=o.map((function(e,r){if(0===r||r===i-1)return null;var s=o[r-1],l=o[r+1],d=(e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]-s[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X])*(1===r?1:.5),v=d+(l[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]-e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X])*(r===i-2?1:.5),y=e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]-I;return 0===v||0===y?null:(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(f,_extends({key:"bar-"+n+"-"+r,component:a,data:_extends({},m[n],{bin:r}),props:{x:e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]-d,y:I,width:v,height:y,className:u,style:C[n],variant:"histogram-bar",setRole:c}},p))})).filter(Boolean);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:c?"histogram-bars-presence":void 0,visible:r,firstRender:k,children:l},"bars-"+n)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:z.filter(Boolean)})},ve=["ids","curve","style","setRole","dataComponent"],HistogramCurve=function HistogramCurve(e){var n=e.ids,r=e.curve,o=void 0===r?"MonotoneX":r,a=e.style,i=e.setRole,u=void 0===i||i,d=e.dataComponent,c=void 0===d?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:d,v=_objectWithoutPropertiesLoose(e,ve),f=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.pg)().data,p=useHistogramPreparedData(),m=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales.color,y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),x=y.disabledKeys,h=y.firstRender;if(!isHistogramProcessedData(f))return null;var b=(null!=n?n:p.keys).map((function(e){var n=!x.has(e),r=p.seriesIndexes[e];if(void 0===r)return null;var i=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(a,m(r));i.fill=void 0;var l=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(c,_extends({data:f[r],component:_chsk_core__WEBPACK_IMPORTED_MODULE_3__.y$,props:{variant:"histogram-curve",points:p.data[r].points,curve:o,style:i,setRole:u}},v));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:u?"histogram-curve-presence":void 0,visible:n,firstRender:h,children:l},"curve-"+r)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:b.filter(Boolean)})},defaultScatterTooltipFormat=function defaultScatterTooltipFormat(e){return e.point?String(e.index)+" ("+e.point[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]+", "+e.point[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]+")":String(e.index)},isScatterProcessedData=function isScatterProcessedData(e){return e.map((function(e){return"object"==typeof e&&null!==e&&"id"in e&&"index"in e&&"x"in e&&"y"in e&&"size"in e})).every(Boolean)},isScatterData=function isScatterData(e){return e.map((function(n){return"id"in n&&"data"in n&&Array.isArray(e)})).every(Boolean)},pe=["ids","style","className","setRole","dataComponent"],me=["ids","style","className","setRole","dataComponent"],ye=["variant","ids","style","className","setRole","dataComponent"],regression=function regression(e,n){var r=e.length,t=0,o=0,a=0,i=0;e.forEach((function(e,r){t+=e,o+=n[r],a+=e*n[r],i+=e*e}));var s=t*t-r*i;return[(a*t-o*i)/s,(o*t-a*r)/s]},getRegressionLineCoordinates=function getRegressionLineCoordinates(e,n){return[[e[0],n[0]+e[0]*n[1]],[e[1],n[0]+e[1]*n[1]]]},PooledRegression=function PooledRegression(e){var r=e.ids,o=e.style,a=e.className,i=e.setRole,l=e.dataComponent,u=void 0===l?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:l,d=_objectWithoutPropertiesLoose(e,pe),c=useScatterPreparedData(),v=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),f=v.disabledKeys,p=v.firstRender,y=null!=r?r:c.keys,x=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var e=[],n=[];if(y.forEach((function(r){var t=c.seriesIndexes[r];void 0!==t&&(f.has(r)||(e=e.concat(c.data[t].x),n=n.concat(c.data[t].y)))})),0===e.length)return null;var r=regression(e,n);return getRegressionLineCoordinates((0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(e),r)}),[c,r]);if(null===x)return null;var h=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(u,_extends({data:{id:y.join(" "),ids:y,variant:"pooled"},component:_chsk_core__WEBPACK_IMPORTED_MODULE_3__.x1,props:{x1:x[0][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],x2:x[1][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],y1:x[0][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],y2:x[1][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],variant:"regression",className:a,style:o,setRole:i}},d));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:"regression-presence",firstRender:p,children:h})},IndividualRegression=function IndividualRegression(e){var r=e.ids,o=e.style,a=e.className,i=e.setRole,u=e.dataComponent,d=void 0===u?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:u,c=_objectWithoutPropertiesLoose(e,me),v=useScatterPreparedData(),f=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales.color,p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),y=p.disabledKeys,x=p.firstRender,h=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var e={};return v.keys.map((function(n,r){e[n]=regression(v.data[r].x,v.data[r].y)})),e}),[v]),b=(null!=r?r:v.keys).map((function(e){var n=v.seriesIndexes[e];if(void 0===n)return null;if(y.has(e))return null;var r=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(o,f(n));r.fill=void 0;var l=getRegressionLineCoordinates((0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(v.data[n].x),h[e]),u=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(d,_extends({data:{id:e,ids:[e],variant:"series"},component:_chsk_core__WEBPACK_IMPORTED_MODULE_3__.x1,props:{x1:l[0][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],x2:l[1][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],y1:l[0][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],y2:l[1][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],variant:"regression",className:a,style:r,setRole:i}},c));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:"regression-presence",firstRender:x,children:u},"regression-"+n)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:b.filter(Boolean)})},Regression=function Regression(e){var n=e.variant,r=void 0===n?"series":n,t=e.ids,o=e.style,a=e.className,i=e.setRole,s=e.dataComponent,l=void 0===s?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:s,u=_objectWithoutPropertiesLoose(e,ye);return("series"===r?IndividualRegression:PooledRegression)(_extends({ids:t,style:o,className:a,setRole:i,dataComponent:l},u))},getSymbolData=function getSymbolData(e,r){return isScatterProcessedData(e)?(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return r.keys.map((function(n){var t=r.seriesIndexes[n],o=e[t];return r.data[t].r.map((function(e,r){var t;return{id:n,index:r,point:[o.x[r],o.y[r]],size:o.size[r],color:null==(t=o.color)?void 0:t[r]}}))}))}),[e,r]):[]},xe=["container","data","x","y","valueColor","valueSize","scaleX","scaleY","scaleColor","scaleSize","autoRescale","children"],Scatter=function Scatter(e){var r=e.container,t=void 0===r?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Wd:r,o=e.data,a=e.x,i=e.y,l=e.valueColor,u=void 0===l?null:l,v=e.valueSize,p=void 0===v?5:v,y=e.scaleX,C=void 0===y?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Bs:y,j=e.scaleY,P=void 0===j?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Bs:j,L=e.scaleColor,W=e.scaleSize,B=void 0===W?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Oo:W,O=e.autoRescale,D=void 0===O||O,F=e.children,A=_objectWithoutPropertiesLoose(e,xe),K=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Fg)(),G=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.uK)(t),H=G.dimsProps,J=G.origin,Q=G.innerSize,T=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.sn)(o)}),[o]),U=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return o.map((function(e){return e.id}))}),[o]),Z=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(U).disabled,$=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e){var n=e.x,r=e.y,t=e.valueSize,o=void 0===t?5:t,a=e.valueColor,i=void 0===a?null:a;return{getX:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.wI)(n),getY:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.wI)(r),getSize:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hA)(o),getColor:i?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.wI)(i):null}}({x:a,y:i,valueSize:p,valueColor:u})}),[a,i,p,u]),ee=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n){var r=n.getX,t=n.getY,o=n.getColor,a=n.getSize;return e.map((function(e,n){return{id:e.id,index:n,x:e.data.map((function(e){return r(e)})),y:e.data.map((function(e){return t(e)})),size:e.data.map((function(e){return a(e)})),color:o?e.data.map((function(e){return o(e)})):void 0}}))}(o,$)}),[o,$]),ne=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n,r,t,o){var a={x:(0,lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(n),y:(0,lodash__WEBPACK_IMPORTED_MODULE_2__.cloneDeep)(r)},filterDisabled=function filterDisabled(e,n){return!o[n]};if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.HB)(n)){var i=e.filter(filterDisabled).map((function(e){return e.x})).flat();a.x=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.zA)(n,(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(i))}if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.HB)(r)){var s=e.filter(filterDisabled).map((function(e){return e.y})).flat();a.y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.zA)(r,(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(s))}return a.x.size=t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],a.y.size=t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],a}(ee,C,P,Q,D?Z:Array(U.length).fill(!1))}),[ee,C,P,Z,D,Z,U]),re=ne.x,te=ne.y,oe=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var e=function(e,n,r){if("categorical"===n.variant)return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.NV)(n,r);var t=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X9)(e.map((function(e){var n;return null!=(n=e.color)?n:[]})).flat());return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.NV)(n,t)}(ee,null!=L?L:K.Colors.categorical,U),n=function(e,n,r){var t=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kg)(e.map((function(e){return e.size})).flat());return(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__._C)(n,t,"number"==typeof r?r:10)}(ee,B,p);return{colorProps:e,sizeProps:n}}),[ee,L,B,K,p,U]),ae=oe.colorProps,ie=oe.sizeProps,se=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.cT)({x:re,y:te,color:ae,size:ie}),le=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e,n){var r=n.x,t=n.y,o=n.size,a=n.color;return e.map((function(e){return{id:e.id,index:e.index,x:e.x.map((function(e){return r(e)})),y:e.y.map((function(e){return t(e)})),r:e.size.map((function(e){return o(e)})),color:e.color?e.color.map((function(e){return a(e)})):void 0}}))}(ee,se.scales)}),[ee,se]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Pz,_extends({variant:"scatter",position:J,size:H.size,padding:H.padding,originalData:o,processedData:ee,seriesIndexes:T,keys:U,scalesContextValue:se},A,{children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ScatterPreparedDataProvider,{data:le,seriesIndexes:T,keys:U,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.X,{features:framer_motion__WEBPACK_IMPORTED_MODULE_5__.H,children:F})})}))},he=["variant","expansion","symbol","symbolStyle","symbolClassName","minDistance","tooltipFormat","className","style","setRole","dataComponent"],ScatterCrosshair=function ScatterCrosshair(e){var r,d=e.variant,c=e.expansion,v=e.symbol,f=void 0===v?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Cd:v,m=e.symbolStyle,y=e.symbolClassName,x=e.minDistance,h=e.tooltipFormat,b=void 0===h?defaultScatterTooltipFormat:h,g=e.className,N=e.style,k=e.setRole,C=void 0===k||k,I=e.dataComponent,z=void 0===I?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Wn:I,S=_objectWithoutPropertiesLoose(e,he),M=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.W3)().data,j=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.pg)().data,L=useScatterPreparedData(),B=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Di)().size,D=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales,A=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)().disabledKeys,E=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),X=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(void 0),Y=X[0],q=X[1],V=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.lL)().setData;if(!isScatterProcessedData(j))return null;if(!isScatterData(M))return null;var ne=c||[0,0,0,0],re=getSymbolData(j,L),te=function(e,r){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){var n=[];return e.keys.forEach((function(t){if(!r.has(t)){var o=e.seriesIndexes[t];if(void 0!==o){var a=e.data[o];a.r.forEach((function(e,r){n.push([a.x[r],a.y[r],o,r])}))}}})),n}),[e,r])}(L,A),oe=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){q(void 0),V({})}),[q,V]),ae=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e){var n,r;if(E&&E.current){var t=E.current.getBoundingClientRect(),o=t.x,a=t.y,i=[e.clientX-o-ne[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.RL],e.clientY-a-ne[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.GS]],s=te.map((function(e){return n=e,r=i,Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2);var n,r})),l=s.reduce((function(e,n,r){return n<e[0]?[n,r]:e}),[s[0],0]),u=Math.sqrt(l[0]);if(x&&u>x)oe();else{var d=te[null!=(n=l[1])?n:0],c=d[2],v=j[c],f=d[3];if(!Y||Y.id!==v.id||Y.index!==f){var p=_extends({},re[c][f],{key:v.id,original:M[c].data[f]}),m=_extends({},p,{label:b(p)});q(m),V({x:d[0],y:d[1],title:m.id,data:[m]}),null==(r=S.handlers)||null==r.onMouseEnter||r.onMouseEnter(p,e)}}}}),[Y,q,V,te,j]),ie=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.debounce)(ae,10,{leading:!0}),se=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{ref:E,role:C?"crosshair-detector":void 0,x:-ne[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.RL],y:-ne[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.GS],width:B[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]+ne[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.RL]+ne[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.pX],height:B[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]+ne[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.GS]+ne[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.D],style:{opacity:0},onMouseMove:ie,onMouseLeave:oe}),le=D.x,ue=D.y,de=void 0!==Y&&void 0!==Y.point?[le(Y.point[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]),ue(Y.point[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y])]:[NaN,NaN],ce=L.seriesIndexes[null!=(r=null==Y?void 0:Y.id)?r:""],ve=function(e){var n,r=e.activeData,o=e.coordinates,a=e.scales,i=e.seriesIndex,s=e.dataComponent,l=void 0===s?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Wn:s,u=e.symbol,d=void 0===u?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Cd:u,c=e.symbolStyle,v=e.symbolClassName,f=e.setRole;if(void 0===r||void 0===r.point)return null;var p=a.size;return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(l,{key:"active-"+i+"-"+r.index,component:d,props:{variant:"active",cx:o[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],cy:o[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],r:p(null!=(n=r.size)?n:0),className:v,style:(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(c,a.color(i)),setRole:f}})}({activeData:Y,coordinates:de,scales:D,seriesIndex:ce,dataComponent:z,symbol:f,symbolStyle:m,symbolClassName:y,setRole:C}),fe=function(e){var n=e.variant,r=void 0===n?"default":n,t=e.coordinates,o=e.size,a=e.style,i=e.setRole,d=e.className;return void 0===t?null:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:["default"===r||"vertical"===r?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.x1,{variant:"crosshair",x1:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],x2:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],y1:0,y2:o[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],style:a,className:d,setRole:i},"vertical"):null,"default"===r||"horizontal"===r?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.x1,{variant:"crosshair",x1:0,x2:o[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],y1:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],y2:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],style:a,className:d,setRole:i},"horizontal"):null]})}({variant:null!=d?d:"default",size:B,coordinates:de,style:N,className:g,setRole:C});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",{role:C?"scatter-crosshair":void 0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:C?"crosshair-presence":void 0,visible:void 0!==Y,firstRender:!1,children:[fe,ve]},"crosshair"),se]})},be=["ids","curve","convolutionMask","convolutionOffset","downsampleFactor","downsampleIndex","style","className","setRole","dataComponent"],ScatterCurve=function ScatterCurve(e){var n=e.ids,r=e.curve,o=void 0===r?"Linear":r,a=e.convolutionMask,i=e.convolutionOffset,u=e.downsampleFactor,d=e.downsampleIndex,c=e.style,v=e.className,f=e.setRole,p=void 0===f||f,m=e.dataComponent,y=void 0===m?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.oK:m,x=_objectWithoutPropertiesLoose(e,be),h=useScatterPreparedData(),b=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales.color,g=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),N=g.disabledKeys,k=g.firstRender,C=(null!=n?n:h.keys).map((function(e){var n=!N.has(e),r=h.seriesIndexes[e];if(void 0===r)return null;var l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(c,b(r));l.fill=void 0;var f=h.data[r],m=curvePoints({x:f.x,y:f.y,convolutionMask:a,convolutionOffset:i,downsampleFactor:u,downsampleIndex:d}),R=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(y,_extends({data:{id:e},component:_chsk_core__WEBPACK_IMPORTED_MODULE_3__.y$,props:{points:m,curve:o,variant:"scatter-curve",className:v,style:l,setRole:p}},x));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:p?"scatter-curve-presence":void 0,visible:n,firstRender:k,children:R},"curve-"+r)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:C.filter(Boolean)})},Re=["variant","lower","upper","capWidth","className","style","setRole"],ScatterErrorBar=function ScatterErrorBar(e){var n=e.variant,r=e.lower,t=e.upper,o=e.capWidth,a=void 0===o?0:o,i=e.className,l=e.style,d=e.setRole,c=_objectWithoutPropertiesLoose(e,Re),v="x"===n?[0,a/2]:[a/2,0],f={style:l,className:i,setRole:!1},p=(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.x1,_extends({x1:r[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],y1:r[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],x2:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],y2:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]},f),"line"),m=a>0?[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.x1,_extends({x1:r[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]-v[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],x2:r[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]+v[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],y1:r[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]-v[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],y2:r[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]+v[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]},f),"lower-cap"),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.x1,_extends({x1:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]-v[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],x2:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X]+v[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],y1:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]-v[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],y2:t[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]+v[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]},f),"upper-cap")]:null;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("g",_extends({role:d?"error-bar":void 0},c,{children:[p,m]}))},ge=["variant","ids","lower","upper","capWidth","style","className","setRole","component","dataComponent"],ScatterErrors=function ScatterErrors(e){var r=e.variant,o=void 0===r?"y":r,a=e.ids,i=e.lower,u=e.upper,d=e.capWidth,c=e.style,v=e.className,f=e.setRole,p=void 0===f||f,m=e.component,y=void 0===m?ScatterErrorBar:m,x=e.dataComponent,h=void 0===x?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Wn:x,b=_objectWithoutPropertiesLoose(e,ge),g=useScatterPreparedData(),N=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.W3)(),k=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales,C=k.x,_=k.y,w=k.color,I=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),z=I.disabledKeys,S=I.firstRender;if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.z0)(C)||!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.z0)(_))return null;var M=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gj)("scatter-errors",v),j=(null!=a?a:g.keys).map((function(e){var r=!z.has(e),a=g.seriesIndexes[e];if(void 0===a)return null;var l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(c,w(a)),v=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e){var n=e.variant,r=e.seriesIndex,t=e.rawData,o=e.preparedData,a=e.scale,i=e.lower,s=e.upper,l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.wI)(i),u=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.wI)(s),d=t.data[r].data,c=d.map((function(e){return a(l(e))})),v=d.map((function(e){return a(u(e))})),f=o.data[r],p="y"===n?f.x:f.y,m="y"===n?function(e){return e}:function(e){return e.reverse()};return c.map((function(e,n){return{lower:m([p[n],e]),upper:m([p[n],v[n]])}}))}({variant:o,seriesIndex:a,rawData:N,preparedData:g,scale:"y"===o?_:C,lower:i,upper:u})}),[o,a,N,g,C,_,i,u]).map((function(n,r){return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(h,_extends({key:"error-"+o+"-"+e+"-"+r,data:{id:e,index:r},component:y,props:{variant:o,lower:n.lower,upper:n.upper,capWidth:d,setRole:p,style:l,className:M}},b))}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:p?"scatter-errors":void 0,visible:r,firstRender:S,children:v},"errors-"+a)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:j.filter(Boolean)})},Ne=["ids","lower","upper","convolutionMask","convolutionOffset","downsampleFactor","downsampleIndex","curve","style","className","setRole","dataComponent"],ScatterInterval=function ScatterInterval(e){var r=e.ids,o=e.lower,a=e.upper,i=e.convolutionMask,u=e.convolutionOffset,d=e.downsampleFactor,c=e.downsampleIndex,v=e.curve,f=void 0===v?"Linear":v,p=e.style,m=e.className,y=e.setRole,x=void 0===y||y,h=e.dataComponent,b=void 0===h?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:h,g=_objectWithoutPropertiesLoose(e,Ne),N=useScatterPreparedData(),k=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.W3)(),C=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales,I=C.y,z=C.color,S=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),M=S.disabledKeys,F=S.firstRender;if(!(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.z0)(I))return null;var A={convolutionMask:i,convolutionOffset:u,downsampleFactor:d,downsampleIndex:c},K=(null!=r?r:N.keys).map((function(e){var r=!M.has(e),i=N.seriesIndexes[e];if(void 0===i)return null;var l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(p,z(i)),u=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)((function(){return function(e){var n,r=e.seriesIndex,t=e.rawData,o=e.preparedData,a=e.yScale,i=e.lower,s=e.upper,l=e.curve,u=e.convolutionMask,d=e.convolutionOffset,c=e.downsampleFactor,v=e.downsampleIndex,f=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.wI)(i),p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.wI)(s),m=t.data[r].data,y=m.map((function(e){return a(f(e))})),x=m.map((function(e){return a(p(e))})),h=o.data[r].x,b={convolutionMask:u,convolutionOffset:d,downsampleFactor:c,downsampleIndex:v},R=curvePoints(_extends({x:h,y},b)),g=curvePoints(_extends({x:h,y:x},b)),N=R.map((function(e,n){return[e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.X],e[_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y],g[n][_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Y]]}));return null!=(n=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Dm)(l)(N))?n:""}(_extends({seriesIndex:i,rawData:k,preparedData:N,yScale:I,lower:o,upper:a,curve:f},A))}),[i,k,N,I,o,a,f]),d=(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(b,_extends({data:{id:e},component:_chsk_core__WEBPACK_IMPORTED_MODULE_3__.y$,props:{variant:"scatter-interval",d:u,setRole:x,style:l,className:m}},g));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:x?"scatter-interval-presence":void 0,visible:r,firstRender:F,children:d},"interval-"+i)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:K.filter(Boolean)})},getClosestPointToX=function getClosestPointToX(e,n,r){if(void 0===r&&(r=-1),1===n.x.length)return 0;var t=0!==r?0:1,o=Math.abs(e-n.x[t]);return n.x.forEach((function(n,a){if(a!==r){var i=Math.abs(e-n);i<o&&(o=i,t=a)}})),t},ScatterLabel=function ScatterLabel(e){var n=e.ids,r=e.x,t=e.units,o=void 0===t?"relative":t,a=e.offset,i=void 0===a?[0,0]:a,u=e.angle,d=void 0===u?0:u,c=e.autoRotate,v=void 0!==c&&c,f=e.style,p=e.className,m=e.setRole,y=void 0===m||m,x=e.children,h=useScatterPreparedData(),b=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales,g=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Di)().size,N=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),k=N.disabledKeys,C=N.firstRender,_=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gj)("scatter-label",p),w=(null!=n?n:h.keys).map((function(e){var n=!k.has(e),t=h.seriesIndexes[e];if(void 0===t)return null;var a=h.data[t];if(0===a.x.length)return null;var l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Oc)(r,Array.isArray(o)?o[0]:o,g[0],b.x),u=getClosestPointToX(l,a),c=[a.x[u],a.y[u]];if(v){var p=getClosestPointToX(l,a,u),m=[a.x[p],a.y[p]],R=(m[1]-c[1])/(m[0]-c[0]);d=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.BV)(Math.atan(R))*(m[0]>c[0]?-1:1),d=Number.isNaN(d)?0:d,c=[(c[0]+m[0])/2,(c[1]+m[1])/2]}return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:y?"scatter-label":void 0,visible:n,firstRender:C,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.ZT,{variant:"label",position:[c[0]+i[0],c[1]+i[1]],angle:d,className:_,style:f,setRole:y,children:x})},"label-"+t)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:w.filter(Boolean)})},ke=["ids","symbol","symbolStyle","symbolClassName","dataComponent","setRole"],ScatterPoints=function ScatterPoints(e){var n=e.ids,r=e.symbol,o=void 0===r?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Cd:r,a=e.symbolStyle,i=e.symbolClassName,u=e.dataComponent,d=void 0===u?_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Aj:u,c=e.setRole,v=void 0===c||c,f=_objectWithoutPropertiesLoose(e,ke),p=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.pg)().data,m=useScatterPreparedData(),y=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.kE)().scales.color,x=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.gK)(),h=x.disabledKeys,b=x.firstRender;if(!isScatterProcessedData(p))return null;var g=getSymbolData(p,m),N=(null!=n?n:m.keys).map((function(e){var n=!h.has(e),r=m.seriesIndexes[e];if(void 0===r)return null;var l=(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(a,y(r)),u=m.data[r],c=u.x,p=u.y,x=u.color,R=n?u.r.map((function(e,n){return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(d,_extends({key:"point-"+r+"-"+n,data:g[r][n],component:o,props:{cx:c[n],cy:p[n],r:e,className:i,style:x?(0,_chsk_core__WEBPACK_IMPORTED_MODULE_3__.hI)(a,x[n]):l,setRole:!1}},f))})):null;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(_chsk_core__WEBPACK_IMPORTED_MODULE_3__.Jj,{role:v?"scatter-points":void 0,visible:n,firstRender:b,children:R},"points-"+r)}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:N.filter(Boolean)})},Ce=["ids","baseline","layers","curve","symbol","areaStyle","curveStyle","symbolStyle"],ScatterSeries=function ScatterSeries(e){var n=e.ids,r=e.baseline,t=void 0===r?0:r,o=e.layers,a=void 0===o?["area","curve","points"]:o,i=e.curve,u=void 0===i?"Linear":i,d=e.symbol,c=e.areaStyle,v=e.curveStyle,f=e.symbolStyle,p=_extends({curve:u},_objectWithoutPropertiesLoose(e,Ce)),m=a.map((function(e){return"points"===e?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ScatterPoints,_extends({ids:n},p,{symbol:d,symbolStyle:f}),"points"):"curve"===e?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ScatterCurve,_extends({ids:n},p,{style:v}),"curve"):"area"===e?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(ScatterArea,_extends({ids:n},p,{baseline:t,style:c}),"area"):void 0}));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment,{children:m.filter(Boolean)})}}}]);